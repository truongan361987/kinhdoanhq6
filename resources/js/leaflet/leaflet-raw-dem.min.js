!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.JSZip=t()}}(function(){return function t(e,r,n){function i(s,o){if(!r[s]){if(!e[s]){var d="function"==typeof require&&require;if(!o&&d)return d(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var h=r[s]={exports:{}};e[s][0].call(h.exports,function(t){var r=e[s][1][t];return i(r?r:t)},h,h.exports,t,e,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,a,s,o,d,h="",l=0;l<t.length;)e=t.charCodeAt(l++),r=t.charCodeAt(l++),i=t.charCodeAt(l++),a=e>>2,s=(3&e)<<4|r>>4,o=(15&r)<<2|i>>6,d=63&i,isNaN(r)?o=d=64:isNaN(i)&&(d=64),h=h+n.charAt(a)+n.charAt(s)+n.charAt(o)+n.charAt(d);return h},r.decode=function(t){var e,r,i,a,s,o,d,h="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)a=n.indexOf(t.charAt(l++)),s=n.indexOf(t.charAt(l++)),o=n.indexOf(t.charAt(l++)),d=n.indexOf(t.charAt(l++)),e=a<<2|s>>4,r=(15&s)<<4|o>>2,i=(3&o)<<6|d,h+=String.fromCharCode(e),64!=o&&(h+=String.fromCharCode(r)),64!=d&&(h+=String.fromCharCode(i));return h}},{}],2:[function(t,e){"use strict";function r(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}r.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=r},{}],3:[function(t,e,r){"use strict";r.STORE={magic:"\x00\x00",compress:function(t){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},r.DEFLATE=t("./flate")},{"./flate":8}],4:[function(t,e){"use strict";var r=t("./utils"),n=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if("undefined"==typeof t||!t.length)return 0;var i="string"!==r.getTypeOf(t);"undefined"==typeof e&&(e=0);var a=0,s=0,o=0;e=-1^e;for(var d=0,h=t.length;h>d;d++)o=i?t[d]:t.charCodeAt(d),s=255&(e^o),a=n[s],e=e>>>8^a;return-1^e}},{"./utils":21}],5:[function(t,e){"use strict";function r(){this.data=null,this.length=0,this.index=0}var n=t("./utils");r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||0>t)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=r},{"./utils":21}],6:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.comment=null},{}],7:[function(t,e,r){"use strict";var n=t("./utils");r.string2binary=function(t){return n.string2binary(t)},r.string2Uint8Array=function(t){return n.transformTo("uint8array",t)},r.uint8Array2String=function(t){return n.transformTo("string",t)},r.string2Blob=function(t){var e=n.transformTo("arraybuffer",t);return n.arrayBuffer2Blob(e)},r.arrayBuffer2Blob=function(t){return n.arrayBuffer2Blob(t)},r.transformTo=function(t,e){return n.transformTo(t,e)},r.getTypeOf=function(t){return n.getTypeOf(t)},r.checkSupport=function(t){return n.checkSupport(t)},r.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,r.pretty=function(t){return n.pretty(t)},r.findCompression=function(t){return n.findCompression(t)},r.isRegExp=function(t){return n.isRegExp(t)}},{"./utils":21}],8:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako");r.uncompressInputType=n?"uint8array":"array",r.compressInputType=n?"uint8array":"array",r.magic="\b\x00",r.compress=function(t){return i.deflateRaw(t)},r.uncompress=function(t){return i.inflateRaw(t)}},{pako:24}],9:[function(t,e){"use strict";function r(t,e){return this instanceof r?(this.files={},this.comment=null,this.root="",t&&this.load(t,e),void(this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t})):new r(t,e)}var n=t("./base64");r.prototype=t("./object"),r.prototype.load=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.utils=t("./deprecatedPublicUtils"),r.base64={encode:function(t){return n.encode(t)},decode:function(t){return n.decode(t)}},r.compressions=t("./compressions"),e.exports=r},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(t,e){"use strict";var r=t("./base64"),n=t("./zipEntries");e.exports=function(t,e){var i,a,s,o;for(e=e||{},e.base64&&(t=r.decode(t)),a=new n(t,e),i=a.files,s=0;s<i.length;s++)o=i[s],this.file(o.fileName,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileComment.length?o.fileComment:null,createFolders:e.createFolders});return a.zipComment.length&&(this.comment=a.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(t,e){(function(t){"use strict";e.exports=function(e,r){return new t(e,r)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(t,e){"use strict";function r(t){this.data=t,this.length=this.data.length,this.index=0}var n=t("./uint8ArrayReader");r.prototype=new n,r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./uint8ArrayReader":18}],13:[function(t,e){"use strict";var r=t("./support"),n=t("./utils"),i=t("./crc32"),a=t("./signature"),s=t("./defaults"),o=t("./base64"),d=t("./compressions"),h=t("./compressedObject"),l=t("./nodeBuffer"),f=t("./utf8"),u=t("./stringWriter"),c=t("./uint8ArrayWriter"),_=function(t){if(t._data instanceof h&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===n.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},p=function(t){var e=_(t),i=n.getTypeOf(e);return"string"===i?!t.options.binary&&r.nodebuffer?l(e,"utf-8"):t.asBinary():e},m=function(t){var e=_(this);return null===e||"undefined"==typeof e?"":(this.options.base64&&(e=o.decode(e)),e=t&&this.options.binary?A.utf8decode(e):n.transformTo("string",e),t||this.options.binary||(e=n.transformTo("string",A.utf8encode(e))),e)},g=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this._data=e,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};g.prototype={asText:function(){return m.call(this,!0)},asBinary:function(){return m.call(this,!1)},asNodeBuffer:function(){var t=p(this);return n.transformTo("nodebuffer",t)},asUint8Array:function(){var t=p(this);return n.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var b=function(t,e){var r,n="";for(r=0;e>r;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},w=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"==typeof r[e]&&(r[e]=arguments[t][e]);return r},v=function(t){return t=t||{},t.base64!==!0||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=w(t,s),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},y=function(t,e,r){var i,a=n.getTypeOf(e);if(r=v(r),r.createFolders&&(i=k(t))&&x.call(this,i,!0),r.dir||null===e||"undefined"==typeof e)r.base64=!1,r.binary=!1,e=null;else if("string"===a)r.binary&&!r.base64&&r.optimizedBinaryString!==!0&&(e=n.string2binary(e));else{if(r.base64=!1,r.binary=!0,!(a||e instanceof h))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===a&&(e=n.transformTo("uint8array",e))}var s=new g(t,e,r);return this.files[t]=s,s},k=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},x=function(t,e){return"/"!=t.slice(-1)&&(t+="/"),e="undefined"!=typeof e?e:!1,this.files[t]||y.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},z=function(t,e){var r,a=new h;return t._data instanceof h?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=d.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(r=t._data.getContent(),a.compressedContent=e.compress(n.transformTo(e.compressInputType,r)))):(r=p(t),(!r||0===r.length||t.dir)&&(e=d.STORE,r=""),a.uncompressedSize=r.length,a.crc32=i(r),a.compressedContent=e.compress(n.transformTo(e.compressInputType,r))),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},C=function(t,e,r,s){var o,d,h,l,u=(r.compressedContent,n.transformTo("string",f.utf8encode(e.name))),c=e.comment||"",_=n.transformTo("string",f.utf8encode(c)),p=u.length!==e.name.length,m=_.length!==c.length,g=e.options,w="",v="",y="";h=e._initialMetadata.dir!==e.dir?e.dir:g.dir,l=e._initialMetadata.date!==e.date?e.date:g.date,o=l.getHours(),o<<=6,o|=l.getMinutes(),o<<=5,o|=l.getSeconds()/2,d=l.getFullYear()-1980,d<<=4,d|=l.getMonth()+1,d<<=5,d|=l.getDate(),p&&(v=b(1,1)+b(i(u),4)+u,w+="up"+b(v.length,2)+v),m&&(y=b(1,1)+b(this.crc32(_),4)+_,w+="uc"+b(y.length,2)+y);var k="";k+="\n\x00",k+=p||m?"\x00\b":"\x00\x00",k+=r.compressionMethod,k+=b(o,2),k+=b(d,2),k+=b(r.crc32,4),k+=b(r.compressedSize,4),k+=b(r.uncompressedSize,4),k+=b(u.length,2),k+=b(w.length,2);var x=a.LOCAL_FILE_HEADER+k+u+w,z=a.CENTRAL_FILE_HEADER+"\x00"+k+b(_.length,2)+"\x00\x00\x00\x00"+(h===!0?"\x00\x00\x00":"\x00\x00\x00\x00")+b(s,4)+u+w+_;return{fileRecord:x,dirRecord:z,compressedObject:r}},A={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,r,n,i,a=[];for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],i=new g(n.name,n._data,w(n.options)),r=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(r,i)&&a.push(i));return a},file:function(t,e,r){if(1===arguments.length){if(n.isRegExp(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}return this.filter(function(e,r){return!r.dir&&e===t})[0]||null}return t=this.root+t,y.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(n.isRegExp(t))return this.filter(function(e,r){return r.dir&&t.test(e)});var e=this.root+t,r=x.call(this,e),i=this.clone();return i.root=r.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter(function(e,r){return r.name.slice(0,t.length)===t}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){t=w(t||{},{base64:!0,compression:"STORE",type:"base64",comment:null}),n.checkSupport(t.type);var e,r,i=[],s=0,h=0,l=n.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var f in this.files)if(this.files.hasOwnProperty(f)){var _=this.files[f],p=_.options.compression||t.compression.toUpperCase(),m=d[p];if(!m)throw new Error(p+" is not a valid compression method !");var g=z.call(this,_,m),v=C.call(this,f,_,g,s);s+=v.fileRecord.length+g.compressedSize,h+=v.dirRecord.length,i.push(v)}var y="";y=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+b(i.length,2)+b(i.length,2)+b(h,4)+b(s,4)+b(l.length,2)+l;var k=t.type.toLowerCase();for(e="uint8array"===k||"arraybuffer"===k||"blob"===k||"nodebuffer"===k?new c(s+h+y.length):new u(s+h+y.length),r=0;r<i.length;r++)e.append(i[r].fileRecord),e.append(i[r].compressedObject.compressedContent);for(r=0;r<i.length;r++)e.append(i[r].dirRecord);e.append(y);var x=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return n.transformTo(t.type.toLowerCase(),x);case"blob":return n.arrayBuffer2Blob(n.transformTo("arraybuffer",x));case"base64":return t.base64?o.encode(x):x;default:return x}},crc32:function(t,e){return i(t,e)},utf8encode:function(t){return n.transformTo("string",f.utf8encode(t))},utf8decode:function(t){return f.utf8decode(t)}};e.exports=A},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],15:[function(t,e){"use strict";function r(t,e){this.data=t,e||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0}var n=t("./dataReader"),i=t("./utils");r.prototype=new n,r.prototype.byteAt=function(t){return this.data.charCodeAt(t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":5,"./utils":21}],16:[function(t,e){"use strict";var r=t("./utils"),n=function(){this.data=[]};n.prototype={append:function(t){t=r.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=n},{"./utils":21}],17:[function(t,e,r){(function(t){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer="undefined"!=typeof t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var e=new ArrayBuffer(0);try{r.blob=0===new Blob([e],{type:"application/zip"}).size}catch(n){try{var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,a=new i;a.append(e),r.blob=0===a.getBlob("application/zip").size}catch(n){r.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(t,e){"use strict";function r(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var n=t("./dataReader");r.prototype=new n,r.prototype.byteAt=function(t){return this.data[t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===e&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a;return-1},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=r},{"./dataReader":5}],19:[function(t,e){"use strict";var r=t("./utils"),n=function(t){this.data=new Uint8Array(t),this.index=0};n.prototype={append:function(t){0!==t.length&&(t=r.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=n},{"./utils":21}],20:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),a=t("./nodeBuffer"),s=new Array(256),o=0;256>o;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;s[254]=s[254]=1;var d=function(t){var e,r,n,a,s,o=t.length,d=0;for(a=0;o>a;a++)r=t.charCodeAt(a),55296===(64512&r)&&o>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),d+=128>r?1:2048>r?2:65536>r?3:4;for(e=i.uint8array?new Uint8Array(d):new Array(d),s=0,a=0;d>s;a++)r=t.charCodeAt(a),55296===(64512&r)&&o>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),128>r?e[s++]=r:2048>r?(e[s++]=192|r>>>6,e[s++]=128|63&r):65536>r?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},h=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+s[t[r]]>e?r:e},l=function(t){var e,r,i,a,o=t.length,d=new Array(2*o);for(r=0,e=0;o>e;)if(i=t[e++],128>i)d[r++]=i;else if(a=s[i],a>4)d[r++]=65533,e+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&o>e;)i=i<<6|63&t[e++],a--;a>1?d[r++]=65533:65536>i?d[r++]=i:(i-=65536,d[r++]=55296|i>>10&1023,d[r++]=56320|1023&i)}return d.length!==r&&(d.subarray?d=d.subarray(0,r):d.length=r),n.applyFromCharCode(d)};r.utf8encode=function(t){return i.nodebuffer?a(t,"utf-8"):d(t)},r.utf8decode=function(t){if(i.nodebuffer)return n.transformTo("nodebuffer",t).toString("utf-8");t=n.transformTo(i.uint8array?"uint8array":"array",t);for(var e=[],r=0,a=t.length,s=65536;a>r;){var o=h(t,Math.min(r+s,a));e.push(i.uint8array?l(t.subarray(r,o)):l(t.slice(r,o))),r=o}return e.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(t,e,r){"use strict";function n(t){return t}function i(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}function a(t){var e=65536,n=[],i=t.length,a=r.getTypeOf(t),s=0,o=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,h(0))}}catch(d){o=!1}if(!o){for(var l="",f=0;f<t.length;f++)l+=String.fromCharCode(t[f]);return l}for(;i>s&&e>1;)try{n.push("array"===a||"nodebuffer"===a?String.fromCharCode.apply(null,t.slice(s,Math.min(s+e,i))):String.fromCharCode.apply(null,t.subarray(s,Math.min(s+e,i)))),s+=e}catch(d){e=Math.floor(e/2)}return n.join("")}function s(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}var o=t("./support"),d=t("./compressions"),h=t("./nodeBuffer");r.string2binary=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r));return e},r.arrayBuffer2Blob=function(t){r.checkSupport("blob");try{return new Blob([t],{type:"application/zip"})}catch(e){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=new n;return i.append(t),i.getBlob("application/zip")}catch(e){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=a;var l={};l.string={string:n,array:function(t){return i(t,new Array(t.length))},arraybuffer:function(t){return l.string.uint8array(t).buffer},uint8array:function(t){return i(t,new Uint8Array(t.length))},nodebuffer:function(t){return i(t,h(t.length))}},l.array={string:a,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return h(t)}},l.arraybuffer={string:function(t){return a(new Uint8Array(t))},array:function(t){return s(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return h(new Uint8Array(t))}},l.uint8array={string:a,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return h(t)}},l.nodebuffer={string:a,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return l.nodebuffer.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:n},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var n=r.getTypeOf(e),i=l[n][t](e);return i},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.nodebuffer&&h.test(t)?"nodebuffer":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){var e=o[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)e=t.charCodeAt(r),n+="\\x"+(16>e?"0":"")+e.toString(16).toUpperCase();return n},r.findCompression=function(t){for(var e in d)if(d.hasOwnProperty(e)&&d[e].magic===t)return d[e];return null},r.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(t,e){"use strict";function r(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var n=t("./stringReader"),i=t("./nodeBufferReader"),a=t("./uint8ArrayReader"),s=t("./utils"),o=t("./signature"),d=t("./zipEntry"),h=t("./support"),l=t("./object");r.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(e)+", expected "+s.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=l.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44,i=0;n>i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===o.CENTRAL_FILE_HEADER;)t=new d({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(-1===t)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(t),this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===t)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=s.getTypeOf(t);this.reader="string"!==e||h.uint8array?"nodebuffer"===e?new i(t):new a(s.transformTo("uint8array",t)):new n(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=r},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(t,e){"use strict";function r(t,e){this.options=t,this.loadOptions=e}var n=t("./stringReader"),i=t("./utils"),a=t("./compressedObject"),s=t("./object");r.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},prepareCompressedContent:function(t,e,r){return function(){var n=t.index;t.setIndex(e);var i=t.readData(r);return t.setIndex(n),i}},prepareContent:function(t,e,r,n,a){return function(){var t=i.transformTo(n.uncompressInputType,this.getCompressedContent()),e=n.uncompress(t);if(e.length!==a)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(e=i.findCompression(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),s.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readString(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength),this.dir=16&this.externalFileAttributes?!0:!1},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=new n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index;for(this.extraFields=this.extraFields||{};t.index<i+this.extraFieldsLength;)e=t.readInt(2),r=t.readInt(2),n=t.readString(r),this.extraFields[e]={id:e,length:r,value:n}},handleUTF8:function(){if(this.useUTF8())this.fileName=s.utf8decode(this.fileName),this.fileComment=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new n(t.value);return 1!==e.readInt(1)?null:s.crc32(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new n(t.value);return 1!==e.readInt(1)?null:s.crc32(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readString(t.length-5))}return null}},e.exports=r},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(t,e){"use strict";var r=t("./lib/utils/common").assign,n=t("./lib/deflate"),i=t("./lib/inflate"),a=t("./lib/zlib/constants"),s={};r(s,n,i,a),e.exports=s},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(t,e,r){"use strict";function n(t,e){var r=new b(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function i(t,e){return e=e||{},e.raw=!0,n(t,e)}function a(t,e){return e=e||{},e.gzip=!0,n(t,e)}var s=t("./zlib/deflate.js"),o=t("./utils/common"),d=t("./utils/strings"),h=t("./zlib/messages"),l=t("./zlib/zstream"),f=0,u=4,c=0,_=1,p=-1,m=0,g=8,b=function(t){this.options=o.assign({level:p,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==c)throw new Error(h[r]);e.header&&s.deflateSetHeader(this.strm,e.header)
};b.prototype.push=function(t,e){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?u:f,i.input="string"==typeof t?d.string2buf(t):t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new o.Buf8(a),i.next_out=0,i.avail_out=a),r=s.deflate(i,n),r!==_&&r!==c)return this.onEnd(r),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&n===u)&&this.onData("string"===this.options.to?d.buf2binstring(o.shrinkBuf(i.output,i.next_out)):o.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&r!==_);return n===u?(r=s.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c):!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===c&&(this.result="string"===this.options.to?this.chunks.join(""):o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=b,r.deflate=n,r.deflateRaw=i,r.gzip=a},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(t,e,r){"use strict";function n(t,e){var r=new u(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function i(t,e){return e=e||{},e.raw=!0,n(t,e)}var a=t("./zlib/inflate.js"),s=t("./utils/common"),o=t("./utils/strings"),d=t("./zlib/constants"),h=t("./zlib/messages"),l=t("./zlib/zstream"),f=t("./zlib/gzheader"),u=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,e.windowBits);if(r!==d.Z_OK)throw new Error(h[r]);this.header=new f,a.inflateGetHeader(this.strm,this.header)};u.prototype.push=function(t,e){var r,n,i,h,l,f=this.strm,u=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:e===!0?d.Z_FINISH:d.Z_NO_FLUSH,f.input="string"==typeof t?o.binstring2buf(t):t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(u),f.next_out=0,f.avail_out=u),r=a.inflate(f,d.Z_NO_FLUSH),r!==d.Z_STREAM_END&&r!==d.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0===f.avail_out||r===d.Z_STREAM_END||0===f.avail_in&&n===d.Z_FINISH)&&("string"===this.options.to?(i=o.utf8border(f.output,f.next_out),h=f.next_out-i,l=o.buf2string(f.output,i),f.next_out=h,f.avail_out=u-h,h&&s.arraySet(f.output,f.output,i,h,0),this.onData(l)):this.onData(s.shrinkBuf(f.output,f.next_out)))}while(f.avail_in>0&&r!==d.Z_STREAM_END);return r===d.Z_STREAM_END&&(n=d.Z_FINISH),n===d.Z_FINISH?(r=a.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===d.Z_OK):!0},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===d.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=u,r.inflate=n,r.inflateRaw=i,r.ungzip=n},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+n),i);for(var a=0;n>a;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,s;for(n=0,e=0,r=t.length;r>e;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;r>e;e++)a=t[e],s.set(a,i),i+=a.length;return s}},a={arraySet:function(t,e,r,n,i){for(var a=0;n>a;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],28:[function(t,e,r){"use strict";function n(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",n=0;e>n;n++)r+=String.fromCharCode(t[n]);return r}var i=t("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(o){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(o){s=!1}for(var d=new i.Buf8(256),h=0;256>h;h++)d[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;d[254]=d[254]=1,r.string2buf=function(t){var e,r,n,a,s,o=t.length,d=0;for(a=0;o>a;a++)r=t.charCodeAt(a),55296===(64512&r)&&o>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),d+=128>r?1:2048>r?2:65536>r?3:4;for(e=new i.Buf8(d),s=0,a=0;d>s;a++)r=t.charCodeAt(a),55296===(64512&r)&&o>a+1&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),128>r?e[s++]=r:2048>r?(e[s++]=192|r>>>6,e[s++]=128|63&r):65536>r?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},r.buf2binstring=function(t){return n(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;n>r;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,a,s,o=e||t.length,h=new Array(2*o);for(i=0,r=0;o>r;)if(a=t[r++],128>a)h[i++]=a;else if(s=d[a],s>4)h[i++]=65533,r+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&o>r;)a=a<<6|63&t[r++],s--;s>1?h[i++]=65533:65536>a?h[i++]=a:(a-=65536,h[i++]=55296|a>>10&1023,h[i++]=56320|1023&a)}return n(h,i)},r.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128===(192&t[r]);)r--;return 0>r?e:0===r?e:r+d[t[r]]>e?r:e}},{"./common":27}],29:[function(t,e){"use strict";function r(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,s=0;0!==r;){s=r>2e3?2e3:r,r-=s;do i=i+e[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0}e.exports=r},{}],30:[function(t,e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(t,e){"use strict";function r(){for(var t,e=[],r=0;256>r;r++){t=r;for(var n=0;8>n;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function n(t,e,r,n){var a=i,s=n+r;t=-1^t;for(var o=n;s>o;o++)t=t>>>8^a[255&(t^e[o])];return-1^t}var i=r();e.exports=n},{}],32:[function(t,e,r){"use strict";function n(t,e){return t.msg=R[e],e}function i(t){return(t<<1)-(t>4?9:0)}function a(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(S.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function o(t,e){B._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function d(t,e){t.pending_buf[t.pending++]=e}function h(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function l(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,S.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=I(t.adler,e,i,r):2===t.state.wrap&&(t.adler=T(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var r,n,i=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,d=t.strstart>t.w_size-he?t.strstart-(t.w_size-he):0,h=t.window,l=t.w_mask,f=t.prev,u=t.strstart+de,c=h[a+s-1],_=h[a+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do if(r=e,h[r+s]===_&&h[r+s-1]===c&&h[r]===h[a]&&h[++r]===h[a+1]){a+=2,r++;do;while(h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&u>a);if(n=de-(u-a),a=u-de,n>s){if(t.match_start=e,s=n,n>=o)break;c=h[a+s-1],_=h[a+s]}}while((e=f[e&l])>d&&0!==--i);return s<=t.lookahead?s:t.lookahead}function u(t){var e,r,n,i,a,s=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-he)){S.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,r=t.hash_size,e=r;do n=t.head[--e],t.head[e]=n>=s?n-s:0;while(--r);r=s,e=r;do n=t.prev[--e],t.prev[e]=n>=s?n-s:0;while(--r);i+=s}if(0===t.strm.avail_in)break;if(r=l(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=oe)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+oe-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<oe)););}while(t.lookahead<he&&0!==t.strm.avail_in)}function c(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(u(t),0===t.lookahead&&e===O)return be;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,o(t,!1),0===t.strm.avail_out))return be;if(t.strstart-t.block_start>=t.w_size-he&&(o(t,!1),0===t.strm.avail_out))return be}return t.insert=0,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?be:be}function _(t,e){for(var r,n;;){if(t.lookahead<he){if(u(t),t.lookahead<he&&e===O)return be;if(0===t.lookahead)break}if(r=0,t.lookahead>=oe&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-he&&(t.match_length=f(t,r)),t.match_length>=oe)if(n=B._tr_tally(t,t.strstart-t.match_start,t.match_length-oe),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=oe){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=B._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(o(t,!1),0===t.strm.avail_out))return be}return t.insert=t.strstart<oe-1?t.strstart:oe-1,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?be:we}function p(t,e){for(var r,n,i;;){if(t.lookahead<he){if(u(t),t.lookahead<he&&e===O)return be;if(0===t.lookahead)break}if(r=0,t.lookahead>=oe&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=oe-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-he&&(t.match_length=f(t,r),t.match_length<=5&&(t.strategy===X||t.match_length===oe&&t.strstart-t.match_start>4096)&&(t.match_length=oe-1)),t.prev_length>=oe&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-oe,n=B._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-oe),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+oe-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=oe-1,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return be}else if(t.match_available){if(n=B._tr_tally(t,0,t.window[t.strstart-1]),n&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return be}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=B._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<oe-1?t.strstart:oe-1,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?be:we}function m(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=de){if(u(t),t.lookahead<=de&&e===O)return be;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=oe&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){a=t.strstart+de;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&a>i);t.match_length=de-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=oe?(r=B._tr_tally(t,1,t.match_length-oe),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=B._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(o(t,!1),0===t.strm.avail_out))return be}return t.insert=0,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?be:we}function g(t,e){for(var r;;){if(0===t.lookahead&&(u(t),0===t.lookahead)){if(e===O)return be;break}if(t.match_length=0,r=B._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(o(t,!1),0===t.strm.avail_out))return be}return t.insert=0,e===N?(o(t,!0),0===t.strm.avail_out?ve:ye):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?be:we}function b(t){t.window_size=2*t.w_size,a(t.head),t.max_lazy_match=E[t.level].max_lazy,t.good_match=E[t.level].good_length,t.nice_match=E[t.level].nice_length,t.max_chain_length=E[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=oe-1,t.match_available=0,t.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=G,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*ae),this.dyn_dtree=new S.Buf16(2*(2*ne+1)),this.bl_tree=new S.Buf16(2*(2*ie+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(se+1),this.heap=new S.Buf16(2*re+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*re+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=q,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?fe:me,t.adler=2===e.wrap?0:1,e.last_flush=O,B._tr_init(e),F):n(t,M)}function y(t){var e=v(t);return e===F&&b(t.state),e}function k(t,e){return t&&t.state?2!==t.state.wrap?M:(t.state.gzhead=e,F):M}function x(t,e,r,i,a,s){if(!t)return M;var o=1;if(e===H&&(e=6),0>i?(o=0,i=-i):i>15&&(o=2,i-=16),1>a||a>J||r!==G||8>i||i>15||0>e||e>9||0>s||s>Y)return n(t,M);8===i&&(i=9);var d=new w;return t.state=d,d.strm=t,d.wrap=o,d.gzhead=null,d.w_bits=i,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=a+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+oe-1)/oe),d.window=new S.Buf8(2*d.w_size),d.head=new S.Buf16(d.hash_size),d.prev=new S.Buf16(d.w_size),d.lit_bufsize=1<<a+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new S.Buf8(d.pending_buf_size),d.d_buf=d.lit_bufsize>>1,d.l_buf=3*d.lit_bufsize,d.level=e,d.strategy=s,d.method=r,y(t)}function z(t,e){return x(t,e,G,Q,$,W)}function C(t,e){var r,o,l,f;if(!t||!t.state||e>U||0>e)return t?n(t,M):M;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===ge&&e!==N)return n(t,0===t.avail_out?j:M);if(o.strm=t,r=o.last_flush,o.last_flush=e,o.status===fe)if(2===o.wrap)t.adler=0,d(o,31),d(o,139),d(o,8),o.gzhead?(d(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),d(o,255&o.gzhead.time),d(o,o.gzhead.time>>8&255),d(o,o.gzhead.time>>16&255),d(o,o.gzhead.time>>24&255),d(o,9===o.level?2:o.strategy>=K||o.level<2?4:0),d(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(d(o,255&o.gzhead.extra.length),d(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=T(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=ue):(d(o,0),d(o,0),d(o,0),d(o,0),d(o,0),d(o,9===o.level?2:o.strategy>=K||o.level<2?4:0),d(o,ke),o.status=me);else{var u=G+(o.w_bits-8<<4)<<8,c=-1;c=o.strategy>=K||o.level<2?0:o.level<6?1:6===o.level?2:3,u|=c<<6,0!==o.strstart&&(u|=le),u+=31-u%31,o.status=me,h(o,u),0!==o.strstart&&(h(o,t.adler>>>16),h(o,65535&t.adler)),t.adler=1}if(o.status===ue)if(o.gzhead.extra){for(l=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),s(t),l=o.pending,o.pending!==o.pending_buf_size));)d(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=ce)}else o.status=ce;if(o.status===ce)if(o.gzhead.name){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),s(t),l=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,d(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),0===f&&(o.gzindex=0,o.status=_e)}else o.status=_e;if(o.status===_e)if(o.gzhead.comment){l=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),s(t),l=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,d(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>l&&(t.adler=T(t.adler,o.pending_buf,o.pending-l,l)),0===f&&(o.status=pe)}else o.status=pe;if(o.status===pe&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&s(t),o.pending+2<=o.pending_buf_size&&(d(o,255&t.adler),d(o,t.adler>>8&255),t.adler=0,o.status=me)):o.status=me),0!==o.pending){if(s(t),0===t.avail_out)return o.last_flush=-1,F}else if(0===t.avail_in&&i(e)<=i(r)&&e!==N)return n(t,j);if(o.status===ge&&0!==t.avail_in)return n(t,j);if(0!==t.avail_in||0!==o.lookahead||e!==O&&o.status!==ge){var _=o.strategy===K?g(o,e):o.strategy===V?m(o,e):E[o.level].func(o,e);if((_===ve||_===ye)&&(o.status=ge),_===be||_===ve)return 0===t.avail_out&&(o.last_flush=-1),F;if(_===we&&(e===L?B._tr_align(o):e!==U&&(B._tr_stored_block(o,0,0,!1),e===D&&(a(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(t),0===t.avail_out))return o.last_flush=-1,F}return e!==N?F:o.wrap<=0?Z:(2===o.wrap?(d(o,255&t.adler),d(o,t.adler>>8&255),d(o,t.adler>>16&255),d(o,t.adler>>24&255),d(o,255&t.total_in),d(o,t.total_in>>8&255),d(o,t.total_in>>16&255),d(o,t.total_in>>24&255)):(h(o,t.adler>>>16),h(o,65535&t.adler)),s(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?F:Z)}function A(t){var e;return t&&t.state?(e=t.state.status,e!==fe&&e!==ue&&e!==ce&&e!==_e&&e!==pe&&e!==me&&e!==ge?n(t,M):(t.state=null,e===me?n(t,P):F)):M}var E,S=t("../utils/common"),B=t("./trees"),I=t("./adler32"),T=t("./crc32"),R=t("./messages"),O=0,L=1,D=3,N=4,U=5,F=0,Z=1,M=-2,P=-3,j=-5,H=-1,X=1,K=2,V=3,Y=4,W=0,q=2,G=8,J=9,Q=15,$=8,te=29,ee=256,re=ee+1+te,ne=30,ie=19,ae=2*re+1,se=15,oe=3,de=258,he=de+oe+1,le=32,fe=42,ue=69,ce=73,_e=91,pe=103,me=113,ge=666,be=1,we=2,ve=3,ye=4,ke=3,xe=function(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i};E=[new xe(0,0,0,0,c),new xe(4,4,8,4,_),new xe(4,5,16,8,_),new xe(4,6,32,32,_),new xe(4,4,16,16,p),new xe(8,16,32,32,p),new xe(8,16,128,128,p),new xe(8,32,128,256,p),new xe(32,128,258,1024,p),new xe(32,258,258,4096,p)],r.deflateInit=z,r.deflateInit2=x,r.deflateReset=y,r.deflateResetKeep=v,r.deflateSetHeader=k,r.deflate=C,r.deflateEnd=A,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(t,e){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},{}],34:[function(t,e){"use strict";var r=30,n=12;e.exports=function(t,e){var i,a,s,o,d,h,l,f,u,c,_,p,m,g,b,w,v,y,k,x,z,C,A,E,S;i=t.state,a=t.next_in,E=t.input,s=a+(t.avail_in-5),o=t.next_out,S=t.output,d=o-(e-t.avail_out),h=o+(t.avail_out-257),l=i.dmax,f=i.wsize,u=i.whave,c=i.wnext,_=i.window,p=i.hold,m=i.bits,g=i.lencode,b=i.distcode,w=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;t:do{15>m&&(p+=E[a++]<<m,m+=8,p+=E[a++]<<m,m+=8),y=g[p&w];e:for(;;){if(k=y>>>24,p>>>=k,m-=k,k=y>>>16&255,0===k)S[o++]=65535&y;else{if(!(16&k)){if(0===(64&k)){y=g[(65535&y)+(p&(1<<k)-1)];continue e}if(32&k){i.mode=n;break t}t.msg="invalid literal/length code",i.mode=r;break t}x=65535&y,k&=15,k&&(k>m&&(p+=E[a++]<<m,m+=8),x+=p&(1<<k)-1,p>>>=k,m-=k),15>m&&(p+=E[a++]<<m,m+=8,p+=E[a++]<<m,m+=8),y=b[p&v];r:for(;;){if(k=y>>>24,p>>>=k,m-=k,k=y>>>16&255,!(16&k)){if(0===(64&k)){y=b[(65535&y)+(p&(1<<k)-1)];continue r}t.msg="invalid distance code",i.mode=r;break t}if(z=65535&y,k&=15,k>m&&(p+=E[a++]<<m,m+=8,k>m&&(p+=E[a++]<<m,m+=8)),z+=p&(1<<k)-1,z>l){t.msg="invalid distance too far back",i.mode=r;break t}if(p>>>=k,m-=k,k=o-d,z>k){if(k=z-k,k>u&&i.sane){t.msg="invalid distance too far back",i.mode=r;break t}if(C=0,A=_,0===c){if(C+=f-k,x>k){x-=k;do S[o++]=_[C++];while(--k);C=o-z,A=S}}else if(k>c){if(C+=f+c-k,k-=c,x>k){x-=k;do S[o++]=_[C++];while(--k);if(C=0,x>c){k=c,x-=k;do S[o++]=_[C++];while(--k);C=o-z,A=S}}}else if(C+=c-k,x>k){x-=k;do S[o++]=_[C++];while(--k);C=o-z,A=S}for(;x>2;)S[o++]=A[C++],S[o++]=A[C++],S[o++]=A[C++],x-=3;x&&(S[o++]=A[C++],x>1&&(S[o++]=A[C++]))}else{C=o-z;do S[o++]=S[C++],S[o++]=S[C++],S[o++]=S[C++],x-=3;while(x>2);x&&(S[o++]=S[C++],x>1&&(S[o++]=S[C++]))}break}}break}}while(s>a&&h>o);x=m>>3,a-=x,m-=x<<3,p&=(1<<m)-1,t.next_in=a,t.next_out=o,t.avail_in=s>a?5+(s-a):5-(a-s),t.avail_out=h>o?257+(h-o):257-(o-h),i.hold=p,i.bits=m}},{}],35:[function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=N,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new g.Buf32(_e),e.distcode=e.distdyn=new g.Buf32(pe),e.sane=1,e.back=-1,S):T}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,a(t)):T}function o(t,e){var r,n;return t&&t.state?(n=t.state,0>e?(r=0,e=-e):(r=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?T:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,s(t))):T}function d(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,r=o(t,e),r!==S&&(t.state=null),r):T}function h(t){return d(t,ge)}function l(t){if(be){var e;for(p=new g.Buf32(512),m=new g.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(y(x,t.lens,0,288,p,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;y(z,t.lens,0,32,m,0,t.work,{bits:5}),be=!1}t.lencode=p,t.lenbits=9,t.distcode=m,t.distbits=5}function f(t,e,r,n){var i,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new g.Buf8(a.wsize)),n>=a.wsize?(g.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),g.arraySet(a.window,e,r-n,i,a.wnext),n-=i,n?(g.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function u(t,e){var r,i,a,s,o,d,h,u,c,_,p,m,_e,pe,me,ge,be,we,ve,ye,ke,xe,ze,Ce,Ae=0,Ee=new g.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return T;r=t.state,r.mode===Y&&(r.mode=W),o=t.next_out,a=t.output,h=t.avail_out,s=t.next_in,i=t.input,d=t.avail_in,u=r.hold,c=r.bits,_=d,p=h,xe=S;t:for(;;)switch(r.mode){case N:if(0===r.wrap){r.mode=W;break}for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(2&r.wrap&&35615===u){r.check=0,Ee[0]=255&u,Ee[1]=u>>>8&255,r.check=w(r.check,Ee,2,0),u=0,c=0,r.mode=U;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=fe;break}if((15&u)!==D){t.msg="unknown compression method",r.mode=fe;break}if(u>>>=4,c-=4,ke=(15&u)+8,0===r.wbits)r.wbits=ke;else if(ke>r.wbits){t.msg="invalid window size",r.mode=fe;break}r.dmax=1<<ke,t.adler=r.check=1,r.mode=512&u?K:Y,u=0,c=0;break;case U:for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(r.flags=u,(255&r.flags)!==D){t.msg="unknown compression method",r.mode=fe;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=fe;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(Ee[0]=255&u,Ee[1]=u>>>8&255,r.check=w(r.check,Ee,2,0)),u=0,c=0,r.mode=F;case F:for(;32>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.head&&(r.head.time=u),512&r.flags&&(Ee[0]=255&u,Ee[1]=u>>>8&255,Ee[2]=u>>>16&255,Ee[3]=u>>>24&255,r.check=w(r.check,Ee,4,0)),u=0,c=0,r.mode=Z;case Z:for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(Ee[0]=255&u,Ee[1]=u>>>8&255,r.check=w(r.check,Ee,2,0)),u=0,c=0,r.mode=M;case M:if(1024&r.flags){for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(Ee[0]=255&u,Ee[1]=u>>>8&255,r.check=w(r.check,Ee,2,0)),u=0,c=0}else r.head&&(r.head.extra=null);r.mode=P;case P:if(1024&r.flags&&(m=r.length,m>d&&(m=d),m&&(r.head&&(ke=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),g.arraySet(r.head.extra,i,s,m,ke)),512&r.flags&&(r.check=w(r.check,i,m,s)),d-=m,s+=m,r.length-=m),r.length))break t;r.length=0,r.mode=j;case j:if(2048&r.flags){if(0===d)break t;m=0;do ke=i[s+m++],r.head&&ke&&r.length<65536&&(r.head.name+=String.fromCharCode(ke));while(ke&&d>m);if(512&r.flags&&(r.check=w(r.check,i,m,s)),d-=m,s+=m,ke)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=H;case H:if(4096&r.flags){if(0===d)break t;m=0;do ke=i[s+m++],r.head&&ke&&r.length<65536&&(r.head.comment+=String.fromCharCode(ke));while(ke&&d>m);if(512&r.flags&&(r.check=w(r.check,i,m,s)),d-=m,s+=m,ke)break t}else r.head&&(r.head.comment=null);r.mode=X;case X:if(512&r.flags){for(;16>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=fe;break}u=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Y;break;case K:for(;32>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}t.adler=r.check=n(u),u=0,c=0,r.mode=V;case V:if(0===r.havedict)return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=d,r.hold=u,r.bits=c,I;t.adler=r.check=1,r.mode=Y;case Y:if(e===A||e===E)break t;case W:if(r.last){u>>>=7&c,c-=7&c,r.mode=de;break}for(;3>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}switch(r.last=1&u,u>>>=1,c-=1,3&u){case 0:r.mode=q;break;case 1:if(l(r),r.mode=ee,e===E){u>>>=2,c-=2;break t}break;case 2:r.mode=Q;break;case 3:t.msg="invalid block type",r.mode=fe}u>>>=2,c-=2;break;case q:for(u>>>=7&c,c-=7&c;32>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if((65535&u)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=fe;break}if(r.length=65535&u,u=0,c=0,r.mode=G,e===E)break t;case G:r.mode=J;case J:if(m=r.length){if(m>d&&(m=d),m>h&&(m=h),0===m)break t;g.arraySet(a,i,s,m,o),d-=m,s+=m,h-=m,o+=m,r.length-=m;break}r.mode=Y;break;case Q:for(;14>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(r.nlen=(31&u)+257,u>>>=5,c-=5,r.ndist=(31&u)+1,u>>>=5,c-=5,r.ncode=(15&u)+4,u>>>=4,c-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=fe;break}r.have=0,r.mode=$;case $:for(;r.have<r.ncode;){for(;3>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.lens[Se[r.have++]]=7&u,u>>>=3,c-=3}for(;r.have<19;)r.lens[Se[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,ze={bits:r.lenbits},xe=y(k,r.lens,0,19,r.lencode,0,r.work,ze),r.lenbits=ze.bits,xe){t.msg="invalid code lengths set",r.mode=fe;break}r.have=0,r.mode=te;case te:for(;r.have<r.nlen+r.ndist;){for(;Ae=r.lencode[u&(1<<r.lenbits)-1],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(16>be)u>>>=me,c-=me,r.lens[r.have++]=be;else{if(16===be){for(Ce=me+2;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(u>>>=me,c-=me,0===r.have){t.msg="invalid bit length repeat",r.mode=fe;break}ke=r.lens[r.have-1],m=3+(3&u),u>>>=2,c-=2}else if(17===be){for(Ce=me+3;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=me,c-=me,ke=0,m=3+(7&u),u>>>=3,c-=3}else{for(Ce=me+7;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=me,c-=me,ke=0,m=11+(127&u),u>>>=7,c-=7}if(r.have+m>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=fe;break}for(;m--;)r.lens[r.have++]=ke}}if(r.mode===fe)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=fe;break}if(r.lenbits=9,ze={bits:r.lenbits},xe=y(x,r.lens,0,r.nlen,r.lencode,0,r.work,ze),r.lenbits=ze.bits,xe){t.msg="invalid literal/lengths set",r.mode=fe;break}if(r.distbits=6,r.distcode=r.distdyn,ze={bits:r.distbits},xe=y(z,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,ze),r.distbits=ze.bits,xe){t.msg="invalid distances set",r.mode=fe;break}if(r.mode=ee,e===E)break t;case ee:r.mode=re;case re:if(d>=6&&h>=258){t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=d,r.hold=u,r.bits=c,v(t,p),o=t.next_out,a=t.output,h=t.avail_out,s=t.next_in,i=t.input,d=t.avail_in,u=r.hold,c=r.bits,r.mode===Y&&(r.back=-1);break}for(r.back=0;Ae=r.lencode[u&(1<<r.lenbits)-1],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(ge&&0===(240&ge)){for(we=me,ve=ge,ye=be;Ae=r.lencode[ye+((u&(1<<we+ve)-1)>>we)],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=we+me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=we,c-=we,r.back+=we}if(u>>>=me,c-=me,r.back+=me,r.length=be,0===ge){r.mode=oe;break}if(32&ge){r.back=-1,r.mode=Y;break}if(64&ge){t.msg="invalid literal/length code",r.mode=fe;break}r.extra=15&ge,r.mode=ne;case ne:if(r.extra){for(Ce=r.extra;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ie;case ie:for(;Ae=r.distcode[u&(1<<r.distbits)-1],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(0===(240&ge)){for(we=me,ve=ge,ye=be;Ae=r.distcode[ye+((u&(1<<we+ve)-1)>>we)],me=Ae>>>24,ge=Ae>>>16&255,be=65535&Ae,!(c>=we+me);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=we,c-=we,r.back+=we}if(u>>>=me,c-=me,r.back+=me,64&ge){t.msg="invalid distance code",r.mode=fe;break}r.offset=be,r.extra=15&ge,r.mode=ae;case ae:if(r.extra){for(Ce=r.extra;Ce>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=fe;break}r.mode=se;case se:if(0===h)break t;
if(m=p-h,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=fe;break}m>r.wnext?(m-=r.wnext,_e=r.wsize-m):_e=r.wnext-m,m>r.length&&(m=r.length),pe=r.window}else pe=a,_e=o-r.offset,m=r.length;m>h&&(m=h),h-=m,r.length-=m;do a[o++]=pe[_e++];while(--m);0===r.length&&(r.mode=re);break;case oe:if(0===h)break t;a[o++]=r.length,h--,r.mode=re;break;case de:if(r.wrap){for(;32>c;){if(0===d)break t;d--,u|=i[s++]<<c,c+=8}if(p-=h,t.total_out+=p,r.total+=p,p&&(t.adler=r.check=r.flags?w(r.check,a,p,o-p):b(r.check,a,p,o-p)),p=h,(r.flags?u:n(u))!==r.check){t.msg="incorrect data check",r.mode=fe;break}u=0,c=0}r.mode=he;case he:if(r.wrap&&r.flags){for(;32>c;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=fe;break}u=0,c=0}r.mode=le;case le:xe=B;break t;case fe:xe=R;break t;case ue:return O;case ce:default:return T}return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=d,r.hold=u,r.bits=c,(r.wsize||p!==t.avail_out&&r.mode<fe&&(r.mode<de||e!==C))&&f(t,t.output,t.next_out,p-t.avail_out)?(r.mode=ue,O):(_-=t.avail_in,p-=t.avail_out,t.total_in+=_,t.total_out+=p,r.total+=p,r.wrap&&p&&(t.adler=r.check=r.flags?w(r.check,a,p,t.next_out-p):b(r.check,a,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Y?128:0)+(r.mode===ee||r.mode===G?256:0),(0===_&&0===p||e===C)&&xe===S&&(xe=L),xe)}function c(t){if(!t||!t.state)return T;var e=t.state;return e.window&&(e.window=null),t.state=null,S}function _(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?T:(r.head=e,e.done=!1,S)):T}var p,m,g=t("../utils/common"),b=t("./adler32"),w=t("./crc32"),v=t("./inffast"),y=t("./inftrees"),k=0,x=1,z=2,C=4,A=5,E=6,S=0,B=1,I=2,T=-2,R=-3,O=-4,L=-5,D=8,N=1,U=2,F=3,Z=4,M=5,P=6,j=7,H=8,X=9,K=10,V=11,Y=12,W=13,q=14,G=15,J=16,Q=17,$=18,te=19,ee=20,re=21,ne=22,ie=23,ae=24,se=25,oe=26,de=27,he=28,le=29,fe=30,ue=31,ce=32,_e=852,pe=592,me=15,ge=me,be=!0;r.inflateReset=s,r.inflateReset2=o,r.inflateResetKeep=a,r.inflateInit=h,r.inflateInit2=d,r.inflate=u,r.inflateEnd=c,r.inflateGetHeader=_,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(t,e){"use strict";var r=t("../utils/common"),n=15,i=852,a=592,s=0,o=1,d=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,c,_,p,m,g,b){var w,v,y,k,x,z,C,A,E,S=b.bits,B=0,I=0,T=0,R=0,O=0,L=0,D=0,N=0,U=0,F=0,Z=null,M=0,P=new r.Buf16(n+1),j=new r.Buf16(n+1),H=null,X=0;for(B=0;n>=B;B++)P[B]=0;for(I=0;_>I;I++)P[e[c+I]]++;for(O=S,R=n;R>=1&&0===P[R];R--);if(O>R&&(O=R),0===R)return p[m++]=20971520,p[m++]=20971520,b.bits=1,0;for(T=1;R>T&&0===P[T];T++);for(T>O&&(O=T),N=1,B=1;n>=B;B++)if(N<<=1,N-=P[B],0>N)return-1;if(N>0&&(t===s||1!==R))return-1;for(j[1]=0,B=1;n>B;B++)j[B+1]=j[B]+P[B];for(I=0;_>I;I++)0!==e[c+I]&&(g[j[e[c+I]]++]=I);if(t===s?(Z=H=g,z=19):t===o?(Z=h,M-=257,H=l,X-=257,z=256):(Z=f,H=u,z=-1),F=0,I=0,B=T,x=m,L=O,D=0,y=-1,U=1<<O,k=U-1,t===o&&U>i||t===d&&U>a)return 1;for(var K=0;;){K++,C=B-D,g[I]<z?(A=0,E=g[I]):g[I]>z?(A=H[X+g[I]],E=Z[M+g[I]]):(A=96,E=0),w=1<<B-D,v=1<<L,T=v;do v-=w,p[x+(F>>D)+v]=C<<24|A<<16|E|0;while(0!==v);for(w=1<<B-1;F&w;)w>>=1;if(0!==w?(F&=w-1,F+=w):F=0,I++,0===--P[B]){if(B===R)break;B=e[c+g[I]]}if(B>O&&(F&k)!==y){for(0===D&&(D=O),x+=T,L=B-D,N=1<<L;R>L+D&&(N-=P[L+D],!(0>=N));)L++,N<<=1;if(U+=1<<L,t===o&&U>i||t===d&&U>a)return 1;y=F&k,p[y]=O<<24|L<<16|x-m|0}}return 0!==F&&(p[x+F]=B-D<<24|64<<16|0),b.bits=O,0}},{"../utils/common":27}],37:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t){return 256>t?se[t]:se[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,r){t.bi_valid>Y-r?(t.bi_buf|=e<<t.bi_valid&65535,a(t,t.bi_buf),t.bi_buf=e>>Y-t.bi_valid,t.bi_valid+=r-Y):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function o(t,e,r){s(t,r[2*e],r[2*e+1])}function d(t,e){var r=0;do r|=1&t,t>>>=1,r<<=1;while(--e>0);return r>>>1}function h(t){16===t.bi_valid?(a(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function l(t,e){var r,n,i,a,s,o,d=e.dyn_tree,h=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,_=e.stat_desc.max_length,p=0;for(a=0;V>=a;a++)t.bl_count[a]=0;for(d[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;K>r;r++)n=t.heap[r],a=d[2*d[2*n+1]+1]+1,a>_&&(a=_,p++),d[2*n+1]=a,n>h||(t.bl_count[a]++,s=0,n>=c&&(s=u[n-c]),o=d[2*n],t.opt_len+=o*(a+s),f&&(t.static_len+=o*(l[2*n+1]+s)));if(0!==p){do{for(a=_-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[_]--,p-=2}while(p>0);for(a=_;0!==a;a--)for(n=t.bl_count[a];0!==n;)i=t.heap[--r],i>h||(d[2*i+1]!==a&&(t.opt_len+=(a-d[2*i+1])*d[2*i],d[2*i+1]=a),n--)}}function f(t,e,r){var n,i,a=new Array(V+1),s=0;for(n=1;V>=n;n++)a[n]=s=s+r[n-1]<<1;for(i=0;e>=i;i++){var o=t[2*i+1];0!==o&&(t[2*i]=d(a[o]++,o))}}function u(){var t,e,r,n,i,a=new Array(V+1);for(r=0,n=0;M-1>n;n++)for(de[n]=r,t=0;t<1<<$[n];t++)oe[r++]=n;for(oe[r-1]=n,i=0,n=0;16>n;n++)for(he[n]=i,t=0;t<1<<te[n];t++)se[i++]=n;for(i>>=7;H>n;n++)for(he[n]=i<<7,t=0;t<1<<te[n]-7;t++)se[256+i++]=n;for(e=0;V>=e;e++)a[e]=0;for(t=0;143>=t;)ie[2*t+1]=8,t++,a[8]++;for(;255>=t;)ie[2*t+1]=9,t++,a[9]++;for(;279>=t;)ie[2*t+1]=7,t++,a[7]++;for(;287>=t;)ie[2*t+1]=8,t++,a[8]++;for(f(ie,j+1,a),t=0;H>t;t++)ae[2*t+1]=5,ae[2*t]=d(t,5);le=new ce(ie,$,P+1,j,V),fe=new ce(ae,te,0,H,V),ue=new ce(new Array(0),ee,0,X,W)}function c(t){var e;for(e=0;j>e;e++)t.dyn_ltree[2*e]=0;for(e=0;H>e;e++)t.dyn_dtree[2*e]=0;for(e=0;X>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function _(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function p(t,e,r,n){_(t),n&&(a(t,r),a(t,~r)),I.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function m(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function g(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&m(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!m(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function b(t,e,r){var n,a,d,h,l=0;if(0!==t.last_lit)do n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],a=t.pending_buf[t.l_buf+l],l++,0===n?o(t,a,e):(d=oe[a],o(t,d+P+1,e),h=$[d],0!==h&&(a-=de[d],s(t,a,h)),n--,d=i(n),o(t,d,r),h=te[d],0!==h&&(n-=he[d],s(t,n,h)));while(l<t.last_lit);o(t,q,e)}function w(t,e){var r,n,i,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,d=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=K,r=0;d>r;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=2>h?++h:0,a[2*i]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=s[2*i+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)g(t,a,r);i=d;do r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],g(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,g(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],l(t,e),f(a,h,t.bl_count)}function v(t,e,r){var n,i,a=-1,s=e[1],o=0,d=7,h=4;for(0===s&&(d=138,h=3),e[2*(r+1)+1]=65535,n=0;r>=n;n++)i=s,s=e[2*(n+1)+1],++o<d&&i===s||(h>o?t.bl_tree[2*i]+=o:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[2*G]++):10>=o?t.bl_tree[2*J]++:t.bl_tree[2*Q]++,o=0,a=i,0===s?(d=138,h=3):i===s?(d=6,h=3):(d=7,h=4))}function y(t,e,r){var n,i,a=-1,d=e[1],h=0,l=7,f=4;for(0===d&&(l=138,f=3),n=0;r>=n;n++)if(i=d,d=e[2*(n+1)+1],!(++h<l&&i===d)){if(f>h){do o(t,i,t.bl_tree);while(0!==--h)}else 0!==i?(i!==a&&(o(t,i,t.bl_tree),h--),o(t,G,t.bl_tree),s(t,h-3,2)):10>=h?(o(t,J,t.bl_tree),s(t,h-3,3)):(o(t,Q,t.bl_tree),s(t,h-11,7));h=0,a=i,0===d?(l=138,f=3):i===d?(l=6,f=3):(l=7,f=4)}}function k(t){var e;for(v(t,t.dyn_ltree,t.l_desc.max_code),v(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=X-1;e>=3&&0===t.bl_tree[2*re[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function x(t,e,r,n){var i;for(s(t,e-257,5),s(t,r-1,5),s(t,n-4,4),i=0;n>i;i++)s(t,t.bl_tree[2*re[i]+1],3);y(t,t.dyn_ltree,e-1),y(t,t.dyn_dtree,r-1)}function z(t){var e,r=4093624447;for(e=0;31>=e;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return R;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return O;for(e=32;P>e;e++)if(0!==t.dyn_ltree[2*e])return O;return R}function C(t){pe||(u(),pe=!0),t.l_desc=new _e(t.dyn_ltree,le),t.d_desc=new _e(t.dyn_dtree,fe),t.bl_desc=new _e(t.bl_tree,ue),t.bi_buf=0,t.bi_valid=0,c(t)}function A(t,e,r,n){s(t,(D<<1)+(n?1:0),3),p(t,e,r,!0)}function E(t){s(t,N<<1,3),o(t,q,ie),h(t)}function S(t,e,r,n){var i,a,o=0;t.level>0?(t.strm.data_type===L&&(t.strm.data_type=z(t)),w(t,t.l_desc),w(t,t.d_desc),o=k(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,i>=a&&(i=a)):i=a=r+5,i>=r+4&&-1!==e?A(t,e,r,n):t.strategy===T||a===i?(s(t,(N<<1)+(n?1:0),3),b(t,ie,ae)):(s(t,(U<<1)+(n?1:0),3),x(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),b(t,t.dyn_ltree,t.dyn_dtree)),c(t),n&&_(t)}function B(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(oe[r]+P+1)]++,t.dyn_dtree[2*i(e)]++),t.last_lit===t.lit_bufsize-1}var I=t("../utils/common"),T=4,R=0,O=1,L=2,D=0,N=1,U=2,F=3,Z=258,M=29,P=256,j=P+1+M,H=30,X=19,K=2*j+1,V=15,Y=16,W=7,q=256,G=16,J=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],te=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=512,ie=new Array(2*(j+2));n(ie);var ae=new Array(2*H);n(ae);var se=new Array(ne);n(se);var oe=new Array(Z-F+1);n(oe);var de=new Array(M);n(de);var he=new Array(H);n(he);var le,fe,ue,ce=function(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length},_e=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},pe=!1;r._tr_init=C,r._tr_stored_block=A,r._tr_flush_block=S,r._tr_tally=B,r._tr_align=E},{"../utils/common":27}],39:[function(t,e){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},{}]},{},[9])(9)});
(function(){var e,r,f,n,t,a,u,l,c,o,d,i,s,b,h,g,p,m,v,y,w,k,M,_,N,x,P,A,G,q,B,R,L,j,O,S,I,Y,E;o=function(r,f,n,t){return new e(r,f,n,t)},"undefined"!=typeof module&&null!==module&&null!=module.exports&&(module.exports=o),"function"==typeof define&&define.amd?define([],function(){return o}):(j="undefined"!=typeof exports&&null!==exports?exports:this,j.chroma=o),o.color=function(r,f,n,t){return new e(r,f,n,t)},o.hsl=function(r,f,n,t){return new e(r,f,n,t,"hsl")},o.hsv=function(r,f,n,t){return new e(r,f,n,t,"hsv")},o.rgb=function(r,f,n,t){return new e(r,f,n,t,"rgb")},o.hex=function(r){return new e(r)},o.css=function(r){return new e(r)},o.lab=function(r,f,n){return new e(r,f,n,"lab")},o.lch=function(r,f,n){return new e(r,f,n,"lch")},o.hsi=function(r,f,n){return new e(r,f,n,"hsi")},o.gl=function(r,f,n,t){return new e(255*r,255*f,255*n,t,"gl")},o.interpolate=function(r,f,n,t){return null==r||null==f?"#000":("string"===O(r)&&(r=new e(r)),"string"===O(f)&&(f=new e(f)),r.interpolate(n,f,t))},o.mix=o.interpolate,o.contrast=function(r,f){var n,t;return"string"===O(r)&&(r=new e(r)),"string"===O(f)&&(f=new e(f)),n=r.luminance(),t=f.luminance(),n>t?(n+.05)/(t+.05):(t+.05)/(n+.05)},o.luminance=function(e){return o(e).luminance()},o._Color=e,e=function(){function e(){var e,r,f,n,t,a,u,l,c,o,i,s,b,v,w,k;for(t=this,f=[],o=0,i=arguments.length;i>o;o++)r=arguments[o],null!=r&&f.push(r);if(0===f.length)s=[255,0,255,1,"rgb"],u=s[0],l=s[1],c=s[2],e=s[3],n=s[4];else if("array"===O(f[0])){if(3===f[0].length)b=f[0],u=b[0],l=b[1],c=b[2],e=1;else{if(4!==f[0].length)throw"unknown input argument";v=f[0],u=v[0],l=v[1],c=v[2],e=v[3]}n=null!=(w=f[1])?w:"rgb"}else"string"===O(f[0])?(u=f[0],n="hex"):"object"===O(f[0])?(k=f[0]._rgb,u=k[0],l=k[1],c=k[2],e=k[3],n="rgb"):f.length>=3&&(u=f[0],l=f[1],c=f[2]);3===f.length?(n="rgb",e=1):4===f.length?"string"===O(f[3])?(n=f[3],e=1):"number"===O(f[3])&&(n="rgb",e=f[3]):5===f.length&&(e=f[3],n=f[4]),null==e&&(e=1),"rgb"===n?t._rgb=[u,l,c,e]:"gl"===n?t._rgb=[255*u,255*l,255*c,e]:"hsl"===n?(t._rgb=p(u,l,c),t._rgb[3]=e):"hsv"===n?(t._rgb=m(u,l,c),t._rgb[3]=e):"hex"===n?t._rgb=h(u):"lab"===n?(t._rgb=y(u,l,c),t._rgb[3]=e):"lch"===n?(t._rgb=M(u,l,c),t._rgb[3]=e):"hsi"===n&&(t._rgb=g(u,l,c),t._rgb[3]=e),a=d(t._rgb)}return e.prototype.rgb=function(){return this._rgb.slice(0,3)},e.prototype.rgba=function(){return this._rgb},e.prototype.hex=function(){return P(this._rgb)},e.prototype.toString=function(){return this.name()},e.prototype.hsl=function(){return G(this._rgb)},e.prototype.hsv=function(){return q(this._rgb)},e.prototype.lab=function(){return B(this._rgb)},e.prototype.lch=function(){return R(this._rgb)},e.prototype.hsi=function(){return A(this._rgb)},e.prototype.gl=function(){return[this._rgb[0]/255,this._rgb[1]/255,this._rgb[2]/255,this._rgb[3]]},e.prototype.luminance=function(){return N(this._rgb)},e.prototype.name=function(){var e,r;e=this.hex();for(r in o.colors)if(e===o.colors[r])return r;return e},e.prototype.alpha=function(e){return arguments.length?(this._rgb[3]=e,this):this._rgb[3]},e.prototype.css=function(e){var r,f,n,t;return null==e&&(e="rgb"),f=this,n=f._rgb,3===e.length&&n[3]<1&&(e+="a"),"rgb"===e?e+"("+n.slice(0,3).map(Math.round).join(",")+")":"rgba"===e?e+"("+n.slice(0,3).map(Math.round).join(",")+","+n[3]+")":"hsl"===e||"hsla"===e?(r=f.hsl(),t=function(e){return Math.round(100*e)/100},r[0]=t(r[0]),r[1]=t(100*r[1])+"%",r[2]=t(100*r[2])+"%",4===e.length&&(r[3]=n[3]),e+"("+r.join(",")+")"):void 0},e.prototype.interpolate=function(r,f,n){var t,a,u,l,c,o,d,i,s,b,h,g,p,m;if(i=this,null==n&&(n="rgb"),"string"===O(f)&&(f=new e(f)),"hsl"===n||"hsv"===n||"lch"===n||"hsi"===n)"hsl"===n?(p=i.hsl(),m=f.hsl()):"hsv"===n?(p=i.hsv(),m=f.hsv()):"hsi"===n?(p=i.hsi(),m=f.hsi()):"lch"===n&&(p=i.lch(),m=f.lch()),"h"===n.substr(0,1)?(u=p[0],h=p[1],o=p[2],l=m[0],g=m[1],d=m[2]):(o=p[0],h=p[1],u=p[2],d=m[0],g=m[1],l=m[2]),isNaN(u)||isNaN(l)?isNaN(u)?isNaN(l)?a=Number.NaN:(a=l,1!==o&&0!==o||"hsv"===n||(b=g)):(a=u,1!==d&&0!==d||"hsv"===n||(b=h)):(t=l>u&&l-u>180?l-(u+360):u>l&&u-l>180?l+360-u:l-u,a=u+r*t),null==b&&(b=h+r*(g-h)),c=o+r*(d-o),s="h"===n.substr(0,1)?new e(a,b,c,n):new e(c,b,a,n);else if("rgb"===n)p=i._rgb,m=f._rgb,s=new e(p[0]+r*(m[0]-p[0]),p[1]+r*(m[1]-p[1]),p[2]+r*(m[2]-p[2]),n);else{if("lab"!==n)throw"color mode "+n+" is not supported";p=i.lab(),m=f.lab(),s=new e(p[0]+r*(m[0]-p[0]),p[1]+r*(m[1]-p[1]),p[2]+r*(m[2]-p[2]),n)}return s.alpha(i.alpha()+r*(f.alpha()-i.alpha())),s},e.prototype.premultiply=function(){var e,r;return r=this.rgb(),e=this.alpha(),o(r[0]*e,r[1]*e,r[2]*e,e)},e.prototype.darken=function(e){var r,f;return null==e&&(e=20),f=this,r=f.lch(),r[0]-=e,o.lch(r).alpha(f.alpha())},e.prototype.darker=function(e){return this.darken(e)},e.prototype.brighten=function(e){return null==e&&(e=20),this.darken(-e)},e.prototype.brighter=function(e){return this.brighten(e)},e.prototype.saturate=function(e){var r,f;return null==e&&(e=20),f=this,r=f.lch(),r[1]+=e,o.lch(r).alpha(f.alpha())},e.prototype.desaturate=function(e){return null==e&&(e=20),this.saturate(-e)},e}(),d=function(e){var r;for(r in e)3>r?(e[r]<0&&(e[r]=0),e[r]>255&&(e[r]=255)):3===r&&(e[r]<0&&(e[r]=0),e[r]>1&&(e[r]=1));return e},b=function(e){var r,f,n,t,a,u,l,c;if(e=e.toLowerCase(),null!=o.colors&&o.colors[e])return h(o.colors[e]);if(n=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(t=n.slice(1,4),f=a=0;2>=a;f=++a)t[f]=+t[f];t[3]=1}else if(n=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(t=n.slice(1,5),f=u=0;3>=u;f=++u)t[f]=+t[f];else if(n=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(t=n.slice(1,4),f=l=0;2>=l;f=++l)t[f]=Math.round(2.55*t[f]);t[3]=1}else if(n=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(t=n.slice(1,5),f=c=0;2>=c;f=++c)t[f]=Math.round(2.55*t[f]);t[3]=+t[3]}else(n=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=n.slice(1,4),r[1]*=.01,r[2]*=.01,t=p(r),t[3]=1):(n=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=n.slice(1,4),r[1]*=.01,r[2]*=.01,t=p(r),t[3]=+n[4]);return t},h=function(e){var r,f,n,t,a,u;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===e.length||7===e.length)&&(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),u=parseInt(e,16),t=u>>16,n=u>>8&255,f=255&u,[t,n,f,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),u=parseInt(e,16),t=u>>24&255,n=u>>16&255,f=u>>8&255,r=255&u,[t,n,f,r];if(a=b(e))return a;throw"unknown color: "+e},g=function(e,r,t){var a,u,l,c;return c=S(arguments),e=c[0],r=c[1],t=c[2],e/=360,1/3>e?(a=(1-r)/3,l=(1+r*s(n*e)/s(f-n*e))/3,u=1-(a+l)):2/3>e?(e-=1/3,l=(1-r)/3,u=(1+r*s(n*e)/s(f-n*e))/3,a=1-(l+u)):(e-=2/3,u=(1-r)/3,a=(1+r*s(n*e)/s(f-n*e))/3,l=1-(u+a)),l=_(t*l*3),u=_(t*u*3),a=_(t*a*3),[255*l,255*u,255*a]},p=function(){var e,r,f,n,t,a,u,l,c,o,d,i,s,b;if(s=S(arguments),n=s[0],l=s[1],a=s[2],0===l)u=f=e=255*a;else{for(d=[0,0,0],r=[0,0,0],o=.5>a?a*(1+l):a+l-a*l,c=2*a-o,n/=360,d[0]=n+1/3,d[1]=n,d[2]=n-1/3,t=i=0;2>=i;t=++i)d[t]<0&&(d[t]+=1),d[t]>1&&(d[t]-=1),r[t]=6*d[t]<1?c+6*(o-c)*d[t]:2*d[t]<1?o:3*d[t]<2?c+(o-c)*(2/3-d[t])*6:c;b=[Math.round(255*r[0]),Math.round(255*r[1]),Math.round(255*r[2])],u=b[0],f=b[1],e=b[2]}return[u,f,e]},m=function(){var e,r,f,n,t,a,u,l,c,o,d,i,s,b,h,g,p,m;if(i=S(arguments),n=i[0],c=i[1],d=i[2],d*=255,0===c)l=f=e=d;else switch(360===n&&(n=0),n>360&&(n-=360),0>n&&(n+=360),n/=60,t=Math.floor(n),r=n-t,a=d*(1-c),u=d*(1-c*r),o=d*(1-c*(1-r)),t){case 0:s=[d,o,a],l=s[0],f=s[1],e=s[2];break;case 1:b=[u,d,a],l=b[0],f=b[1],e=b[2];break;case 2:h=[a,d,o],l=h[0],f=h[1],e=h[2];break;case 3:g=[a,u,d],l=g[0],f=g[1],e=g[2];break;case 4:p=[o,a,d],l=p[0],f=p[1],e=p[2];break;case 5:m=[d,a,u],l=m[0],f=m[1],e=m[2]}return l=Math.round(l),f=Math.round(f),e=Math.round(e),[l,f,e]},r=18,t=.95047,a=1,u=1.08883,v=function(){var e,r,f,n,t,a;return a=S(arguments),t=a[0],e=a[1],r=a[2],f=Math.sqrt(e*e+r*r),n=Math.atan2(r,e)/Math.PI*180,[t,f,n]},y=function(e,r,f){var n,l,c,o,d,i,s;return void 0!==e&&3===e.length&&(i=e,e=i[0],r=i[1],f=i[2]),void 0!==e&&3===e.length&&(s=e,e=s[0],r=s[1],f=s[2]),o=(e+16)/116,c=o+r/500,d=o-f/200,c=w(c)*t,o=w(o)*a,d=w(d)*u,l=Y(3.2404542*c-1.5371385*o-.4985314*d),n=Y(-.969266*c+1.8760108*o+.041556*d),f=Y(.0556434*c-.2040259*o+1.0572252*d),[_(l,0,255),_(n,0,255),_(f,0,255),1]},w=function(e){return e>.206893034?e*e*e:(e-4/29)/7.787037},Y=function(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))},k=function(){var e,r,f,n;return n=S(arguments),f=n[0],e=n[1],r=n[2],r=r*Math.PI/180,[f,Math.cos(r)*e,Math.sin(r)*e]},M=function(e,r,f){var n,t,a,u,l,c,o;return c=k(e,r,f),n=c[0],t=c[1],a=c[2],o=y(n,t,a),l=o[0],u=o[1],a=o[2],[_(l,0,255),_(u,0,255),_(a,0,255)]},N=function(e,r,f){var n;return n=S(arguments),e=n[0],r=n[1],f=n[2],e=x(e),r=x(r),f=x(f),.2126*e+.7152*r+.0722*f},x=function(e){return e/=255,.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4)},P=function(){var e,r,f,n,t,a;return a=S(arguments),f=a[0],r=a[1],e=a[2],t=f<<16|r<<8|e,n="000000"+t.toString(16),"#"+n.substr(n.length-6)},A=function(){var e,r,f,n,t,a,u,l,c;return c=S(arguments),u=c[0],f=c[1],r=c[2],e=2*Math.PI,u/=255,f/=255,r/=255,a=Math.min(u,f,r),t=(u+f+r)/3,l=1-a/t,0===l?n=0:(n=(u-f+(u-r))/2,n/=Math.sqrt((u-f)*(u-f)+(u-r)*(f-r)),n=Math.acos(n),r>f&&(n=e-n),n/=e),[360*n,l,t]},G=function(e,r,f){var n,t,a,u,l,c;return void 0!==e&&e.length>=3&&(c=e,e=c[0],r=c[1],f=c[2]),e/=255,r/=255,f/=255,u=Math.min(e,r,f),a=Math.max(e,r,f),t=(a+u)/2,a===u?(l=0,n=Number.NaN):l=.5>t?(a-u)/(a+u):(a-u)/(2-a-u),e===a?n=(r-f)/(a-u):r===a?n=2+(f-e)/(a-u):f===a&&(n=4+(e-r)/(a-u)),n*=60,0>n&&(n+=360),[n,l,t]},q=function(){var e,r,f,n,t,a,u,l,c,o;return o=S(arguments),u=o[0],f=o[1],e=o[2],a=Math.min(u,f,e),t=Math.max(u,f,e),r=t-a,c=t/255,0===t?(n=Number.NaN,l=0):(l=r/t,u===t&&(n=(f-e)/r),f===t&&(n=2+(e-u)/r),e===t&&(n=4+(u-f)/r),n*=60,0>n&&(n+=360)),[n,l,c]},B=function(){var e,r,f,n,l,c,o;return o=S(arguments),f=o[0],r=o[1],e=o[2],f=L(f),r=L(r),e=L(e),n=I((.4124564*f+.3575761*r+.1804375*e)/t),l=I((.2126729*f+.7151522*r+.072175*e)/a),c=I((.0193339*f+.119192*r+.9503041*e)/u),[116*l-16,500*(n-l),200*(l-c)]},L=function(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},I=function(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29},R=function(){var e,r,f,n,t,a,u;return a=S(arguments),t=a[0],f=a[1],r=a[2],u=B(t,f,r),n=u[0],e=u[1],r=u[2],v(n,e,r)},o.scale=function(e,r){var f,n,t,a,u,l,c,d,i,s,b,h,g,p,m,v,y,w,k,M,_;return v="rgb",y=o("#ccc"),_=0,g=!1,h=[0,1],s=[],k=!1,M=[],m=0,p=1,b=!1,w=0,i={},l=function(e,r){var f,n,t,a,l,c,d;if(null==e&&(e=["#ddd","#222"]),null!=e&&"string"===O(e)&&null!=(null!=(l=o.brewer)?l[e]:void 0)&&(e=o.brewer[e]),"array"===O(e)){for(e=e.slice(0),f=t=0,c=e.length-1;c>=0?c>=t:t>=c;f=c>=0?++t:--t)n=e[f],"string"===O(n)&&(e[f]=o(n));if(null!=r)M=r;else for(M=[],f=a=0,d=e.length-1;d>=0?d>=a:a>=d;f=d>=0?++a:--a)M.push(f/(e.length-1))}return u(),s=e},c=function(e){return null==e&&(e=[]),h=e,m=e[0],p=e[e.length-1],u(),w=2===e.length?0:e.length-1},t=function(e){var r,f;if(null!=h){for(f=h.length-1,r=0;f>r&&e>=h[r];)r++;return r-1}return 0},d=function(e){return e},f=function(e){var r,f,n,a,u;return u=e,h.length>2&&(a=h.length-1,r=t(e),n=h[0]+(h[1]-h[0])*(0+.5*_),f=h[a-1]+(h[a]-h[a-1])*(1-.5*_),u=m+(h[r]+.5*(h[r+1]-h[r])-n)/(f-n)*(p-m)),u},a=function(e,r){var f,n,a,u,l,c,b,g,k;if(null==r&&(r=!1),isNaN(e))return y;if(r?b=e:h.length>2?(f=t(e),b=f/(w-1)):(b=a=(e-m)/(p-m),b=Math.min(1,Math.max(0,b))),r||(b=d(b)),l=Math.floor(1e4*b),i[l])n=i[l];else{if("array"===O(s))for(u=g=0,k=M.length-1;k>=0?k>=g:g>=k;u=k>=0?++g:--g){if(c=M[u],c>=b){n=s[u];break}if(b>=c&&u===M.length-1){n=s[u];break}if(b>c&&b<M[u+1]){b=(b-c)/(M[u+1]-c),n=o.interpolate(s[u],s[u+1],b,v);break}}else"function"===O(s)&&(n=s(b));i[l]=n}return n},u=function(){return i={}},l(e,r),n=function(e){var r;return r=a(e),k&&r[k]?r[k]():r},n.domain=function(e,r,f,t){var a;return null==f&&(f="e"),arguments.length?(null!=r&&(a=o.analyze(e,t),e=0===r?[a.min,a.max]:o.limits(a,f,r)),c(e),n):h},n.mode=function(e){return arguments.length?(v=e,u(),n):v},n.range=function(e,r){return l(e,r),n},n.out=function(e){return k=e,n},n.spread=function(e){return arguments.length?(_=e,n):_},n.correctLightness=function(e){return arguments.length?(b=e,u(),d=b?function(e){var r,f,n,t,u,l,c,o,d;for(r=a(0,!0).lab()[0],f=a(1,!0).lab()[0],c=r>f,n=a(e,!0).lab()[0],u=r+(f-r)*e,t=n-u,o=0,d=1,l=20;Math.abs(t)>.01&&l-->0;)!function(){return c&&(t*=-1),0>t?(o=e,e+=.5*(d-e)):(d=e,e+=.5*(o-e)),n=a(e,!0).lab()[0],t=n-u}();return e}:function(e){return e},n):b},n.colors=function(r){var f,t,a,u,l,c;if(null==r&&(r="hex"),e=[],t=[],h.length>2)for(f=a=1,c=h.length;c>=1?c>a:a>c;f=c>=1?++a:--a)t.push(.5*(h[f-1]+h[f]));else t=h;for(u=0,l=t.length;l>u;u++)f=t[u],e.push(n(f)[r]());return e},n},null==(E=o.scales)&&(o.scales={}),o.scales.cool=function(){return o.scale([o.hsl(180,1,.9),o.hsl(250,.7,.4)])},o.scales.hot=function(){return o.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},o.analyze=function(e,r,f){var n,t,a,u,l,c,d;if(a={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==f&&(f=function(){return!0}),n=function(e){null==e||isNaN(e)||(a.values.push(e),a.sum+=e,e<a.min&&(a.min=e),e>a.max&&(a.max=e),a.count+=1)},l=function(e,t){return f(e,t)?n(null!=r&&"function"===O(r)?r(e):null!=r&&"string"===O(r)||"number"===O(r)?e[r]:e):void 0},"array"===O(e))for(c=0,d=e.length;d>c;c++)u=e[c],l(u);else for(t in e)u=e[t],l(u,t);return a.domain=[a.min,a.max],a.limits=function(e,r){return o.limits(a,e,r)},a},o.limits=function(e,r,f){var n,t,a,u,l,c,d,i,s,b,h,g,p,m,v,y,w,k,M,_,N,x,P,A,G,q,B,R,L,j,S,I,Y,E,z,F,U,C,V,X,D,$,H,J,K,Q,T,W,Z,er,rr,fr,nr,tr,ar,ur;if(null==r&&(r="equal"),null==f&&(f=7),"array"===O(e)&&(e=o.analyze(e)),p=e.min,h=e.max,P=e.sum,q=e.values.sort(function(e,r){return e-r}),b=[],"c"===r.substr(0,1)&&(b.push(p),b.push(h)),"e"===r.substr(0,1)){for(b.push(p),d=B=1,U=f-1;U>=1?U>=B:B>=U;d=U>=1?++B:--B)b.push(p+d/f*(h-p));b.push(h)}else if("l"===r.substr(0,1)){if(0>=p)throw"Logarithmic scales are only possible for values > 0";for(m=Math.LOG10E*Math.log(p),g=Math.LOG10E*Math.log(h),b.push(p),d=R=1,J=f-1;J>=1?J>=R:R>=J;d=J>=1?++R:--R)b.push(Math.pow(10,m+d/f*(g-m)));b.push(h)}else if("q"===r.substr(0,1)){for(b.push(p),d=L=1,K=f-1;K>=1?K>=L:L>=K;d=K>=1?++L:--L)M=q.length*d/f,_=Math.floor(M),_===M?b.push(q[_]):(N=M-_,b.push(q[_]*N+q[_+1]*(1-N)));b.push(h)}else if("k"===r.substr(0,1)){for(y=q.length,n=new Array(y),l=new Array(f),x=!0,w=0,a=null,a=[],a.push(p),d=j=1,Q=f-1;Q>=1?Q>=j:j>=Q;d=Q>=1?++j:--j)a.push(p+d/f*(h-p));for(a.push(h);x;){for(i=S=0,T=f-1;T>=0?T>=S:S>=T;i=T>=0?++S:--S)l[i]=0;for(d=I=0,W=y-1;W>=0?W>=I:I>=W;d=W>=0?++I:--I){for(G=q[d],v=Number.MAX_VALUE,i=Y=0,Z=f-1;Z>=0?Z>=Y:Y>=Z;i=Z>=0?++Y:--Y)c=Math.abs(a[i]-G),v>c&&(v=c,t=i);l[t]++,n[d]=t}for(k=new Array(f),i=E=0,er=f-1;er>=0?er>=E:E>=er;i=er>=0?++E:--E)k[i]=null;for(d=z=0,rr=y-1;rr>=0?rr>=z:z>=rr;d=rr>=0?++z:--z)u=n[d],null===k[u]?k[u]=q[d]:k[u]+=q[d];for(i=F=0,C=f-1;C>=0?C>=F:F>=C;i=C>=0?++F:--F)k[i]*=1/l[i];for(x=!1,i=fr=0,V=f-1;V>=0?V>=fr:fr>=V;i=V>=0?++fr:--fr)if(k[i]!==a[d]){x=!0;break}a=k,w++,w>200&&(x=!1)}for(s={},i=nr=0,X=f-1;X>=0?X>=nr:nr>=X;i=X>=0?++nr:--nr)s[i]=[];for(d=tr=0,D=y-1;D>=0?D>=tr:tr>=D;d=D>=0?++tr:--tr)u=n[d],s[u].push(q[d]);for(A=[],i=ar=0,$=f-1;$>=0?$>=ar:ar>=$;i=$>=0?++ar:--ar)A.push(s[i][0]),A.push(s[i][s[i].length-1]);for(A=A.sort(function(e,r){return e-r}),b.push(A[0]),d=ur=1,H=A.length-1;H>=ur;d=ur+=2)isNaN(A[d])||b.push(A[d])}return b},o.brewer=c={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},o.colors=i={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6"},O=function(){var e,r,f,n,t;for(e={},t="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),f=0,n=t.length;n>f;f++)r=t[f],e["[object "+r+"]"]=r.toLowerCase();return function(r){var f;return f=Object.prototype.toString.call(r),e[f]||"object"}}(),_=function(e,r,f){return null==r&&(r=0),null==f&&(f=1),r>e&&(e=r),e>f&&(e=f),e},S=function(e){return e.length>=3?e:e[0]},n=2*Math.PI,f=Math.PI/3,s=Math.cos,l=function(e){var r,f,n,t,a,u,c,d,i,s,b;return e=function(){var r,f,n;for(n=[],r=0,f=e.length;f>r;r++)t=e[r],n.push(o(t));return n}(),2===e.length?(i=function(){var r,f,n;for(n=[],r=0,f=e.length;f>r;r++)t=e[r],n.push(t.lab());return n}(),a=i[0],u=i[1],r=function(e){var r,f;return f=function(){var f,n;for(n=[],r=f=0;2>=f;r=++f)n.push(a[r]+e*(u[r]-a[r]));return n}(),o.lab.apply(o,f)}):3===e.length?(s=function(){var r,f,n;for(n=[],r=0,f=e.length;f>r;r++)t=e[r],n.push(t.lab());return n}(),a=s[0],u=s[1],c=s[2],r=function(e){var r,f;return f=function(){var f,n;for(n=[],r=f=0;2>=f;r=++f)n.push((1-e)*(1-e)*a[r]+2*(1-e)*e*u[r]+e*e*c[r]);return n}(),o.lab.apply(o,f)}):4===e.length?(b=function(){var r,f,n;for(n=[],r=0,f=e.length;f>r;r++)t=e[r],n.push(t.lab());return n}(),a=b[0],u=b[1],c=b[2],d=b[3],r=function(e){var r,f;return f=function(){var f,n;for(n=[],r=f=0;2>=f;r=++f)n.push((1-e)*(1-e)*(1-e)*a[r]+3*(1-e)*(1-e)*e*u[r]+3*(1-e)*e*e*c[r]+e*e*e*d[r]);return n}(),o.lab.apply(o,f)}):5===e.length&&(f=l(e.slice(0,3)),n=l(e.slice(2,5)),r=function(e){return.5>e?f(2*e):n(2*(e-.5))}),r},o.interpolate.bezier=l}).call(this);
var dat=dat||{};dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css=function(){return{load:function(e,t){t=t||document;var n=t.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){t=t||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}}}(),dat.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),o=e.length-1;o>=0;o--)n=[e[o].apply(this,n)];return n[0]}},each:function(t,n,o){if(t)if(e&&t.forEach&&t.forEach===e)t.forEach(n,o);else if(t.length===t.length+0){for(var i=0,r=t.length;r>i;i++)if(i in t&&n.call(o,t[i],i)===this.BREAK)return}else for(var i in t)if(n.call(o,t[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),dat.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0};return e.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(dat.utils.common),dat.dom.dom=function(e){function t(t){if("0"===t||e.isUndefined(t))return 0;var n=t.match(i);return e.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},o={};e.each(n,function(t,n){e.each(t,function(e){o[e]=n})});var i=/(\d+(\.\d+)?)px/,r={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,n,o){e.isUndefined(n)&&(n=!0),e.isUndefined(o)&&(o=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),o&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,n,i,r){i=i||{};var s=o[n];if(!s)throw new Error("Event type "+n+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var l=i.x||i.clientX||0,d=i.y||i.clientY||0;a.initMouseEvent(n,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,l,d,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;e.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(n,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(n,i.bubbles||!1,i.cancelable||!0)}e.defaults(a,r),t.dispatchEvent(a)},bind:function(e,t,n,o){return o=o||!1,e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on"+t,n),r},unbind:function(e,t,n,o){return o=o||!1,e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent("on"+t,n),r},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1==n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return r},removeClass:function(e,t){if(t)if(void 0===e.className);else if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!=o&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return r},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var n=getComputedStyle(e);return t(n["border-left-width"])+t(n["border-right-width"])+t(n["padding-left"])+t(n["padding-right"])+t(n.width)},getHeight:function(e){var n=getComputedStyle(e);return t(n["border-top-width"])+t(n["border-bottom-width"])+t(n["padding-top"])+t(n["padding-bottom"])+t(n.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return r}(dat.utils.common),dat.controllers.OptionController=function(e,t,n){var o=function(e,i,r){o.superclass.call(this,e,i);var s=this;if(this.__select=document.createElement("select"),n.isArray(r)){var a={};n.each(r,function(e){a[e]=e}),r=a}n.each(r,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;s.setValue(e)}),this.domElement.appendChild(this.__select)};return o.superclass=e,n.extend(o.prototype,e.prototype,{setValue:function(e){var t=o.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),o.superclass.prototype.updateDisplay.call(this)}}),o}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(e,t){function n(e){return e=e.toString(),e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var o=function(e,i,r){o.superclass.call(this,e,i),r=r||{},this.__min=r.min,this.__max=r.max,this.__step=r.step,this.__impliedStep=t.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=n(this.__impliedStep)};return o.superclass=e,t.extend(o.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),o.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=n(e),this}}),o}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(e,t,n){function o(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var i=function(e,o,r){function s(){var e=parseFloat(h.__input.value);n.isNaN(e)||h.setValue(e)}function a(){s(),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}function l(e){t.bind(window,"mousemove",d),t.bind(window,"mouseup",c),u=e.clientY}function d(e){var t=u-e.clientY;h.setValue(h.getValue()+t*h.__impliedStep),u=e.clientY}function c(){t.unbind(window,"mousemove",d),t.unbind(window,"mouseup",c)}this.__truncationSuspended=!1,i.superclass.call(this,e,o,r);var u,h=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",s),t.bind(this.__input,"blur",a),t.bind(this.__input,"mousedown",l),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(h.__truncationSuspended=!0,this.blur(),h.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=e,n.extend(i.prototype,e.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():o(this.getValue(),this.__precision),i.superclass.prototype.updateDisplay.call(this)}}),i}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(e,t,n,o,i){function r(e,t,n,o,i){return o+(i-o)*((e-t)/(n-t))}var s=function(e,n,o,i,a){function l(e){t.bind(window,"mousemove",d),t.bind(window,"mouseup",c),d(e)}function d(e){e.preventDefault();var n=t.getOffset(u.__background),o=t.getWidth(u.__background);return u.setValue(r(e.clientX,n.left,n.left+o,u.__min,u.__max)),!1}function c(){t.unbind(window,"mousemove",d),t.unbind(window,"mouseup",c),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}s.superclass.call(this,e,n,{min:o,max:i,step:a});var u=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",l),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=e,s.useDefaultStyles=function(){n.inject(i)},o.extend(s.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),dat.controllers.FunctionController=function(e,t,n){var o=function(e,n,i){o.superclass.call(this,e,n);var r=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,t.bind(this.__button,"click",function(e){return e.preventDefault(),r.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return o.superclass=e,n.extend(o.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}),o}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(e,t,n){var o=function(e,n){function i(){r.setValue(!r.__prev)}o.superclass.call(this,e,n);var r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",i,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return o.superclass=e,n.extend(o.prototype,e.prototype,{setValue:function(e){var t=o.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,o.superclass.prototype.updateDisplay.call(this)}}),o}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(var n=t.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(dat.utils.common),dat.color.interpret=function(e,t){var n,o,i=function(){o=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(r,function(i){return i.litmus(e)?(t.each(i.conversions,function(i,r){return n=i.read(e),o===!1&&n!==!1?(o=n,n.conversionName=r,n.conversion=i,t.BREAK):void 0}),t.BREAK):void 0}),o},r=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3!=e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4!=e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return i}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(e,t,n,o,i,r,s,a,l,d,c,u,h,p,_){function f(e,t,n,r){if(void 0===t[n])throw new Error("Object "+t+' has no property "'+n+'"');var s;if(r.color)s=new c(t,n);else{var a=[t,n].concat(r.factoryArgs);s=o.apply(e,a)}r.before instanceof i&&(r.before=r.before.__li),b(e,s),p.addClass(s.domElement,"c");var l=document.createElement("span");p.addClass(l,"property-name"),l.innerHTML=s.property;var d=document.createElement("div");d.appendChild(l),d.appendChild(s.domElement);var u=m(e,d,r.before);return p.addClass(u,H.CLASS_CONTROLLER_ROW),p.addClass(u,typeof s.getValue()),g(e,u,s),e.__controllers.push(s),s}function m(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,params.before):e.__ul.appendChild(o),e.onResize(),o}function g(e,t,n){if(n.__li=t,n.__gui=e,_.extend(n,{options:function(t){return arguments.length>1?(n.remove(),f(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[_.toArray(arguments)]})):_.isArray(t)||_.isObject(t)?(n.remove(),f(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof l){var o=new a(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});_.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=n[e],i=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),i.apply(o,e)}}),p.addClass(t,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof a){var i=function(t){return _.isNumber(n.__min)&&_.isNumber(n.__max)?(n.remove(),f(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=_.compose(i,n.min),n.max=_.compose(i,n.max)}else n instanceof r?(p.bind(t,"click",function(){p.fakeEvent(n.__checkbox,"click")}),p.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof s?(p.bind(t,"click",function(){p.fakeEvent(n.__button,"click")}),p.bind(t,"mouseover",function(){p.addClass(n.__button,"hover")}),p.bind(t,"mouseout",function(){p.removeClass(n.__button,"hover")})):n instanceof c&&(p.addClass(t,"color"),n.updateDisplay=_.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=_.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&k(e.getRoot(),!0),t},n.setValue)}function b(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!=o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r,s=n.load.remembered;if(s[e.preset])r=s[e.preset];else{if(!s[B])return;r=s[B]}if(r[o]&&void 0!==r[o][t.property]){var a=r[o][t.property];t.initialValue=a,t.setValue(a)}}}}function v(e,t){return document.location.href+"."+t}function y(e){function t(){d.style.display=e.useLocalStorage?"block":"none"}var n=e.__save_row=document.createElement("li");p.addClass(e.domElement,"has-save"),e.__ul.insertBefore(n,e.__ul.firstChild),p.addClass(n,"save-row");var o=document.createElement("span");o.innerHTML="&nbsp;",p.addClass(o,"button gears");var i=document.createElement("span");i.innerHTML="Save",p.addClass(i,"button"),p.addClass(i,"save");var r=document.createElement("span");r.innerHTML="New",p.addClass(r,"button"),p.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",p.addClass(s,"button"),p.addClass(s,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?_.each(e.load.remembered,function(t,n){E(e,n,n==e.preset)}):E(e,B,!1),p.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),n.appendChild(a),n.appendChild(o),n.appendChild(i),n.appendChild(r),n.appendChild(s),D){var l=document.getElementById("dg-save-locally"),d=document.getElementById("dg-local-explain");l.style.display="block";var c=document.getElementById("dg-local-storage");"true"===localStorage.getItem(v(e,"isLocal"))&&c.setAttribute("checked","checked"),t(),p.bind(c,"change",function(){e.useLocalStorage=!e.useLocalStorage,t()})}var u=document.getElementById("dg-new-constructor");p.bind(u,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||O.hide()}),p.bind(o,"click",function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),O.show(),u.focus(),u.select()}),p.bind(i,"click",function(){e.save()}),p.bind(r,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),p.bind(s,"click",function(){e.revert()})}function x(e){function t(t){return t.preventDefault(),i=t.clientX,p.addClass(e.__closeButton,H.CLASS_DRAG),p.bind(window,"mousemove",n),p.bind(window,"mouseup",o),!1}function n(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function o(){p.removeClass(e.__closeButton,H.CLASS_DRAG),p.unbind(window,"mousemove",n),p.unbind(window,"mouseup",o)}e.__resize_handle=document.createElement("div"),_.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var i;p.bind(e.__resize_handle,"mousedown",t),p.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function w(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function C(e,t){var n={};return _.each(e.__rememberedObjects,function(o,i){var r={},s=e.__rememberedObjectIndecesToControllers[i];_.each(s,function(e,n){r[n]=t?e.initialValue:e.getValue()}),n[i]=r}),n}function E(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function A(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value==e.preset&&(e.__preset_select.selectedIndex=t)}function k(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function S(e){0!=e.length&&u(function(){S(e)}),_.each(e,function(e){e.updateDisplay()})}e.inject(n);var O,T,L="dg",N=72,R=20,B="Default",D=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),F=!0,V=!1,I=[],H=function(e){function t(){var e=n.getRoot();e.width+=1,_.defer(function(){e.width-=1})}var n=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,L),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=e||{},e=_.defaults(e,{autoPlace:!0,width:H.DEFAULT_WIDTH}),e=_.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),_.isUndefined(e.load)?e.load={preset:B}:e.preset&&(e.load.preset=e.preset),_.isUndefined(e.parent)&&e.hideable&&I.push(this),e.resizable=_.isUndefined(e.parent)&&e.resizable,e.autoPlace&&_.isUndefined(e.scrollable)&&(e.scrollable=!0);var o,i=D&&"true"===localStorage.getItem(v(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:e.load.preset},set:function(t){n.parent?n.getRoot().preset=t:e.load.preset=t,A(this),n.revert()}},width:{get:function(){return e.width},set:function(t){e.width=t,w(n,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,s&&(s.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(t){e.closed=t,e.closed?p.addClass(n.__ul,H.CLASS_CLOSED):p.removeClass(n.__ul,H.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?H.TEXT_OPEN:H.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return i},set:function(e){D&&(i=e,e?p.bind(window,"unload",o):p.unbind(window,"unload",o),localStorage.setItem(v(n,"isLocal"),e))}}}),_.isUndefined(e.parent)){if(e.closed=!1,p.addClass(this.domElement,H.CLASS_MAIN),p.makeSelectable(this.domElement,!1),D&&i){n.useLocalStorage=!0;var r=localStorage.getItem(v(this,"gui"));r&&(e.load=JSON.parse(r))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=H.TEXT_CLOSED,p.addClass(this.__closeButton,H.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===e.closed&&(e.closed=!0);var s=document.createTextNode(e.name);p.addClass(s,"controller-name");var a=m(n,s),l=function(e){return e.preventDefault(),n.closed=!n.closed,!1};p.addClass(this.__ul,H.CLASS_CLOSED),p.addClass(a,"title"),p.bind(a,"click",l),e.closed||(this.closed=!1)}e.autoPlace&&(_.isUndefined(e.parent)&&(F&&(T=document.createElement("div"),p.addClass(T,L),p.addClass(T,H.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(T),F=!1),T.appendChild(this.domElement),p.addClass(this.domElement,H.CLASS_AUTO_PLACE)),this.parent||w(n,e.width)),p.bind(window,"resize",function(){n.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){n.onResize()}),p.bind(this.__ul,"transitionend",function(){n.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){n.onResize()}),this.onResize(),e.resizable&&x(this),o=function(){D&&"true"===localStorage.getItem(v(n,"isLocal"))&&localStorage.setItem(v(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=o;n.getRoot();e.parent||t()};return H.toggleHide=function(){V=!V,_.each(I,function(e){e.domElement.style.zIndex=V?-999:999,e.domElement.style.opacity=V?0:1})},H.CLASS_AUTO_PLACE="a",H.CLASS_AUTO_PLACE_CONTAINER="ac",H.CLASS_MAIN="main",H.CLASS_CONTROLLER_ROW="cr",H.CLASS_TOO_TALL="taller-than-window",H.CLASS_CLOSED="closed",H.CLASS_CLOSE_BUTTON="close-button",H.CLASS_DRAG="drag",H.DEFAULT_WIDTH=245,H.TEXT_CLOSED="Close Controls",H.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(e){"text"===document.activeElement.type||e.which!==N&&e.keyCode!=N||H.toggleHide()},!1),_.extend(H.prototype,{add:function(e,t){return f(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return f(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;_.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&T.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new H(t);this.__folders[e]=n;var o=m(this,n.domElement);return p.addClass(o,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=p.getOffset(e.__ul).top,n=0;_.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=p.getHeight(t))}),window.innerHeight-t-R<n?(p.addClass(e.domElement,H.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-R+"px"):(p.removeClass(e.domElement,H.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&_.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(_.isUndefined(O)&&(O=new h,O.domElement.innerHTML=t),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;_.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&y(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=C(this)),e.folders={},_.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=C(this),k(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[B]=C(this,!0)),this.load.remembered[e]=C(this),this.preset=e,E(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){_.each(this.__controllers,function(t){this.getRoot().load.remembered?b(e||this.getRoot(),t):t.setValue(t.initialValue)},this),_.each(this.__folders,function(e){e.revert(e)}),e||k(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&S(this.__listening)}}),H}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',"",dat.controllers.factory=function(e,t,n,o,i,r,s){return function(a,l){var d=a[l];
return s.isArray(arguments[2])||s.isObject(arguments[2])?new e(a,l,arguments[2]):s.isNumber(d)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?new n(a,l,arguments[2],arguments[3]):new t(a,l,{min:arguments[2],max:arguments[3]}):s.isString(d)?new o(a,l):s.isFunction(d)?new i(a,l,""):s.isBoolean(d)?new r(a,l):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(e,t,n){var o=function(e,n){function i(){s.setValue(s.__input.value)}function r(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}o.superclass.call(this,e,n);var s=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",r),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return o.superclass=e,n.extend(o.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),o.superclass.prototype.updateDisplay.call(this)}}),o}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(e,t,n,o,i){function r(e,t,n,o){e.style.background="",i.each(l,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "})}function s(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(e,l){function d(e){p(e),t.bind(window,"mousemove",p),t.bind(window,"mouseup",c)}function c(){t.unbind(window,"mousemove",p),t.unbind(window,"mouseup",c)}function u(){var e=o(this.value);e!==!1?(f.__color.__state=e,f.setValue(f.__color.toOriginal())):this.value=f.__color.toString()}function h(){t.unbind(window,"mousemove",_),t.unbind(window,"mouseup",h)}function p(e){e.preventDefault();var n=t.getWidth(f.__saturation_field),o=t.getOffset(f.__saturation_field),i=(e.clientX-o.left+document.body.scrollLeft)/n,r=1-(e.clientY-o.top+document.body.scrollTop)/n;return r>1?r=1:0>r&&(r=0),i>1?i=1:0>i&&(i=0),f.__color.v=r,f.__color.s=i,f.setValue(f.__color.toOriginal()),!1}function _(e){e.preventDefault();var n=t.getHeight(f.__hue_field),o=t.getOffset(f.__hue_field),i=1-(e.clientY-o.top+document.body.scrollTop)/n;return i>1?i=1:0>i&&(i=0),f.__color.h=360*i,f.setValue(f.__color.toOriginal()),!1}a.superclass.call(this,e,l),this.__color=new n(this.getValue()),this.__temp=new n(0);var f=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&u.call(this)}),t.bind(this.__input,"blur",u),t.bind(this.__selector,"mousedown",function(){t.addClass(this,"drag").bind(window,"mouseup",function(){t.removeClass(f.__selector,"drag")})});var m=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(m.style,{width:"100%",height:"100%",background:"none"}),r(m,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",d),t.bind(this.__field_knob,"mousedown",d),t.bind(this.__hue_field,"mousedown",function(e){_(e),t.bind(window,"mousemove",_),t.bind(window,"mouseup",h)}),this.__saturation_field.appendChild(m),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=e,i.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=o(this.getValue());if(e!==!1){var t=!1;i.each(n.COMPONENTS,function(n){return i.isUndefined(e[n])||i.isUndefined(this.__color.__state[n])||e[n]===this.__color.__state[n]?void 0:(t=!0,{})},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,r(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var l=["-moz-","-o-","-webkit-","-ms-",""];return a}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(e,t,n,o){function i(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(s(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(s(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function r(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(a(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[t]=e}})}function s(e,n,i){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";o.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function a(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);o.extend(e.__state,{s:n.s,v:n.v}),o.isNaN(n.h)?o.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var l=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return l.COMPONENTS=["r","g","b","h","s","v","hex","a"],o.extend(l.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(l.prototype,"r",2),i(l.prototype,"g",1),i(l.prototype,"b",0),r(l.prototype,"h"),r(l.prototype,"s"),r(l.prototype,"v"),Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(l.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),l}(dat.color.interpret,dat.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=[[n,a,r],[s,n,r],[r,n,a],[r,s,n],[a,r,n],[n,r,s]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var o,i,r=Math.min(e,t,n),s=Math.max(e,t,n),a=s-r;return 0==s?{h:0/0,s:0,v:0}:(i=a/s,o=e==s?(t-n)/a:t==s?2+(n-e)/a:4+(e-t)/a,o/=6,0>o&&(o+=1),{h:360*o,s:i,v:s/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),o=this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,o){return o<<(e=8*n)|t&~(255<<e)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),dat.dom.CenteredDiv=function(e,t){var n=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var t=this,n=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},n}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common);
L.Control.Permalink=L.Control.extend({includes:L.Mixin.Events,options:{position:"bottomleft",useAnchor:!0,useLocation:!1,text:"Permalink"},initialize:function(t){L.Util.setOptions(this,t),this._params={},this._set_urlvars(),this.on("update",this._set_center,this);for(var i in this)"string"==typeof i&&0===i.indexOf("initialize_")&&this[i]()},onAdd:function(t){if(this._container=L.DomUtil.create("div","leaflet-control-attribution leaflet-control-permalink"),L.DomEvent.disableClickPropagation(this._container),this._map=t,this._href=L.DomUtil.create("a",null,this._container),this._href.innerHTML=this.options.text,t.on("moveend",this._update_center,this),this.fire("update",{params:this._params}),this._update_center(),this.options.useAnchor&&"onhashchange"in window){var i=this,n=window.onhashchange;window.onhashchange=function(){return i._set_urlvars(),n?n():void 0}}return this.fire("add",{map:t}),this._container},_update_center:function(){if(this._map){var t=this._round_point(this._map.getCenter());this._update({zoom:this._map.getZoom(),lat:t.lat,lon:t.lng})}},_update_href:function(){var t=L.Util.getParamString(this._params),i="?";this.options.useAnchor&&(i="#");var n=this._url_base+i+t.slice(1);return this._href&&this._href.setAttribute("href",n),this.options.useLocation&&location.replace("#"+t.slice(1)),n},_round_point:function(t){var i=this._map.getBounds(),n=this._map.getSize(),e=i.getNorthEast(),r=i.getSouthWest(),a=function(t,i){if(0===i)return t;for(var n=1;1>i&&i>-1;)t*=10,i*=10,n*=10;return Math.floor(t)/n};return t.lat=a(t.lat,(e.lat-r.lat)/n.y),t.lng=a(t.lng,(e.lng-r.lng)/n.x),t},_update:function(t){for(var i in t)t.hasOwnProperty(i)&&(null!==t[i]&&void 0!==t[i]?this._params[i]=t[i]:delete this._params[i]);this._update_href()},_set_urlvars:function(){function t(t,i){for(var n in t)if(t.hasOwnProperty(n)&&t[n]!==i[n])return!1;return!0}this._url_base=window.location.href.split("#")[0].split("?")[0];var i;i=L.UrlUtil.queryParse(this.options.useAnchor?L.UrlUtil.hash():L.UrlUtil.query()),t(i,this._params)&&t(this._params,i)||(this._params=i,this._update_href(),this.fire("update",{params:this._params}))},_set_center:function(t){var i=t.params;void 0!==i.zoom&&void 0!==i.lat&&void 0!==i.lon&&this._map.setView(new L.LatLng(i.lat,i.lon),i.zoom)}}),L.UrlUtil={queryParse:function(t){var i={},n="&";-1!==t.search("&amp;")&&(n="&amp;");for(var e=t.split(n),r=0;r<e.length;r++){var a=e[r].split("=");2===a.length&&(i[a[0]]=decodeURI(a[1]))}return i},query:function(){var t=window.location.href.split("#")[0],i=t.indexOf("?");return 0>i?"":t.slice(i+1)},hash:function(){return window.location.hash.slice(1)},updateParamString:function(t,i){var n=L.UrlUtil.queryParse(t);for(var e in i)i.hasOwnProperty(e)&&(n[e]=i[e]);return L.Util.getParamString(n).slice(1)}};
L.Control.Coordinates=L.Control.extend({options:{position:"bottomright",decimals:4,decimalSeperator:".",labelTemplateLat:"Lat: {y}",labelTemplateLng:"Lng: {x}",labelFormatterLat:void 0,labelFormatterLng:void 0,enableUserInput:!0,useDMS:!1,useLatLngOrder:!1},onAdd:function(t){this._map=t;var e="leaflet-control-coordinates",i=this._container=L.DomUtil.create("div",e),n=this.options;this._labelcontainer=L.DomUtil.create("div","uiElement label",i),this._label=L.DomUtil.create("span","labelFirst",this._labelcontainer),this._inputcontainer=L.DomUtil.create("div","uiElement input uiHidden",i);var a,o;return n.useLatLngOrder?(o=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer),a=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer)):(a=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer),o=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer)),a.innerHTML=n.labelTemplateLng.replace("{x}",""),o.innerHTML=n.labelTemplateLat.replace("{y}",""),L.DomEvent.on(this._inputX,"keyup",this._handleKeypress,this),L.DomEvent.on(this._inputY,"keyup",this._handleKeypress,this),t.on("mousemove",this._update,this),t.on("dragstart",this.collapse,this),t.whenReady(this._update,this),this._showsCoordinates=!0,n.enableUserInput&&L.DomEvent.addListener(this._container,"click",this._switchUI,this),i},_createInput:function(t,e){var i=L.DomUtil.create("input",t,e);return i.type="text",L.DomEvent.disableClickPropagation(i),i},_clearMarker:function(){this._map.removeLayer(this._marker)},_handleKeypress:function(t){switch(t.keyCode){case 27:this.collapse();break;case 13:this._handleSubmit(),this.collapse();break;default:this._handleSubmit()}},_handleSubmit:function(){var t=L.NumberFormatter.createValidNumber(this._inputX.value,this.options.decimalSeperator),e=L.NumberFormatter.createValidNumber(this._inputY.value,this.options.decimalSeperator);if(void 0!==t&&void 0!==e){var i=this._marker;i||(i=this._marker=L.marker(),i.on("click",this._clearMarker,this)),i.setLatLng(new L.LatLng(e,t)),i.addTo(this._map)}},expand:function(){this._showsCoordinates=!1,this._map.off("mousemove",this._update,this),L.DomEvent.addListener(this._container,"mousemove",L.DomEvent.stop),L.DomEvent.removeListener(this._container,"click",this._switchUI,this),L.DomUtil.addClass(this._labelcontainer,"uiHidden"),L.DomUtil.removeClass(this._inputcontainer,"uiHidden")},_createCoordinateLabel:function(t){var e,i,n=this.options;return e=n.labelFormatterLng?n.labelFormatterLng(t.lng):L.Util.template(n.labelTemplateLng,{x:this._getNumber(t.lng,n)}),i=n.labelFormatterLat?n.labelFormatterLat(t.lat):L.Util.template(n.labelTemplateLat,{y:this._getNumber(t.lat,n)}),n.useLatLngOrder?i+" "+e:e+" "+i},_getNumber:function(t,e){var i;return i=e.useDMS?L.NumberFormatter.toDMS(t):L.NumberFormatter.round(t,e.decimals,e.decimalSeperator)},collapse:function(){if(!this._showsCoordinates&&(this._map.on("mousemove",this._update,this),this._showsCoordinates=!0,this.options,L.DomEvent.addListener(this._container,"click",this._switchUI,this),L.DomEvent.removeListener(this._container,"mousemove",L.DomEvent.stop),L.DomUtil.addClass(this._inputcontainer,"uiHidden"),L.DomUtil.removeClass(this._labelcontainer,"uiHidden"),this._marker)){var t=L.marker(),e=this._marker.getLatLng();t.setLatLng(e);var i=L.DomUtil.create("div",""),n=L.DomUtil.create("div","",i);n.innerHTML=this._createCoordinateLabel(e);var a=L.DomUtil.create("a","",i);a.innerHTML="Remove",a.href="#";var o=L.DomEvent.stopPropagation;L.DomEvent.on(a,"click",o).on(a,"mousedown",o).on(a,"dblclick",o).on(a,"click",L.DomEvent.preventDefault).on(a,"click",function(){this._map.removeLayer(t)},this),t.bindPopup(i),t.addTo(this._map),this._map.removeLayer(this._marker),this._marker=null}},_switchUI:function(t){L.DomEvent.stop(t),L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._showsCoordinates?this.expand():this.collapse()},onRemove:function(t){t.off("mousemove",this._update,this)},_update:function(t){var e=t.latlng,i=this.options;e&&(e=e.wrap(),this._currentPos=e,this._inputY.value=L.NumberFormatter.round(e.lat,i.decimals,i.decimalSeperator),this._inputX.value=L.NumberFormatter.round(e.lng,i.decimals,i.decimalSeperator),this._label.innerHTML=this._createCoordinateLabel(e))}}),L.control.coordinates=function(t){return new L.Control.Coordinates(t)},L.Map.mergeOptions({coordinateControl:!1}),L.Map.addInitHook(function(){this.options.coordinateControl&&(this.coordinateControl=new L.Control.Coordinates,this.addControl(this.coordinateControl))}),L.NumberFormatter={round:function(t,e,i){var n=L.Util.formatNum(t,e)+"",a=n.split(".");if(a[1]){for(var o=e-a[1].length;o>0;o--)a[1]+="0";n=a.join(i||".")}return n},toDMS:function(t){var e=Math.floor(t),i=60*(t-e),n=Math.floor(i),a=60*(i-n),o=Math.round(a);return 60==o&&(n++,o="00"),60==n&&(e++,n="00"),10>o&&(o="0"+o),10>n&&(n="0"+n),""+e+"&deg; "+n+"' "+o+"''"},createValidNumber:function(t,e){if(t&&t.length>0){var i=t.split(e||".");try{var n=Number(i.join("."));return isNaN(n)?void 0:n}catch(a){return void 0}}return void 0}};
L.Grid=L.LayerGroup.extend({options:{xticks:8,yticks:5,coordStyle:"MinDec",coordTemplates:{MinDec:"{degAbs}&deg;&nbsp;{minDec}'{dir}",DMS:"{degAbs}{dir}{min}'{sec}\""},lineStyle:{stroke:!0,color:"#111",opacity:.6,weight:1},redraw:"move"},initialize:function(t){L.LayerGroup.prototype.initialize.call(this),L.Util.setOptions(this,t)},onAdd:function(t){this._map=t;var i=this.redraw();this._map.on("viewreset "+this.options.redraw,function(){i.redraw()}),this.eachLayer(t.addLayer,t)},onRemove:function(t){t.off("viewreset "+this.options.redraw,this.map),this.eachLayer(this.removeLayer,this)},redraw:function(){this._bounds=this._map.getBounds().pad(.5);var t,i=[],e=this._latLines();for(t in e)Math.abs(e[t])>90||(i.push(this._horizontalLine(e[t])),i.push(this._label("lat",e[t])));var n=this._lngLines();for(t in n)i.push(this._verticalLine(n[t])),i.push(this._label("lng",n[t]));this.eachLayer(this.removeLayer,this);for(t in i)this.addLayer(i[t]);return this},_latLines:function(){return this._lines(this._bounds.getSouth(),this._bounds.getNorth(),2*this.options.yticks,this._containsEquator())},_lngLines:function(){return this._lines(this._bounds.getWest(),this._bounds.getEast(),2*this.options.xticks,this._containsIRM())},_lines:function(t,i,e,n){var s=t-i,o=this._round(s/e,s);t=n?Math.floor(t/o)*o:this._snap(t,o);for(var r=[],a=-1;e>=a;a++)r.push(t-a*o);return r},_containsEquator:function(){var t=this._map.getBounds();return t.getSouth()<0&&t.getNorth()>0},_containsIRM:function(){var t=this._map.getBounds();return t.getWest()<0&&t.getEast()>0},_verticalLine:function(t){return new L.Polyline([[this._bounds.getNorth(),t],[this._bounds.getSouth(),t]],this.options.lineStyle)},_horizontalLine:function(t){return new L.Polyline([[t,this._bounds.getWest()],[t,this._bounds.getEast()]],this.options.lineStyle)},_snap:function(t,i){return Math.floor(t/i)*i},_round:function(t,i){var e;if(i=Math.abs(i),i>=1)e=Math.abs(t)>1?Math.round(t):0>t?Math.floor(t):Math.ceil(t);else{var n=this._dec2dms(i);e=n.min>=1?60*Math.ceil(n.min):Math.ceil(60*n.minDec)}return e},_label:function(t,i){var e,n=this._map.getBounds().pad(-.005);return e="lng"==t?L.latLng(n.getNorth(),i):L.latLng(i,n.getWest()),L.marker(e,{icon:L.divIcon({iconSize:[0,0],className:"leaflet-grid-label",html:'<div class="'+t+'">'+this.formatCoord(i,t)+"</div>"})})},_dec2dms:function(t){var i=Math.floor(t),e=60*(t-i),n=Math.floor(60*(e-Math.floor(e)));return{deg:i,degAbs:Math.abs(i),min:Math.floor(e),minDec:e,sec:n}},formatCoord:function(t,i,e){if(e||(e=this.options.coordStyle),"decimal"==e){var n;return n=t>=10?2:t>=1?3:4,t.toFixed(n)}var s,o=this._dec2dms(t);return s=0===o.deg?"&nbsp;":"lat"==i?o.deg>0?"N":"S":o.deg>0?"E":"W",L.Util.template(this.options.coordTemplates[e],L.Util.extend(o,{dir:s,minDec:Math.round(o.minDec,2)}))}}),L.grid=function(t){return new L.Grid(t)};
L.Graticule=L.GeoJSON.extend({options:{style:{color:"#333",weight:1},interval:20},initialize:function(t){L.Util.setOptions(this,t),this._layers={},this.addData(this.options.sphere?this._getFrame():this._getGraticule())},_getFrame:function(){return{type:"Polygon",coordinates:[this._getMeridian(-180).concat(this._getMeridian(180).reverse())]}},_getGraticule:function(){for(var t=[],e=this.options.interval,i=0;180>=i;i+=e)t.push(this._getFeature(this._getMeridian(i),{name:i?i.toString()+"° E":"Prime meridian"})),0!==i&&t.push(this._getFeature(this._getMeridian(-i),{name:i.toString()+"° W"}));for(var r=0;90>=r;r+=e)t.push(this._getFeature(this._getParallel(r),{name:r?r.toString()+"° N":"Equator"})),0!==r&&t.push(this._getFeature(this._getParallel(-r),{name:r.toString()+"° S"}));return{type:"FeatureCollection",features:t}},_getMeridian:function(t){t=this._lngFix(t);for(var e=[],i=-90;90>=i;i++)e.push([t,i]);return e},_getParallel:function(t){for(var e=[],i=-180;180>=i;i++)e.push([this._lngFix(i),t]);return e},_getFeature:function(t,e){return{type:"Feature",geometry:{type:"LineString",coordinates:t},properties:e}},_lngFix:function(t){return t>=180?179.999999:-180>=t?-179.999999:t}}),L.graticule=function(t){return new L.Graticule(t)};
var FileLoader=L.Class.extend({includes:L.Mixin.Events,options:{layerOptions:{},fileSizeLimit:1024},initialize:function(t,e){this._map=t,L.Util.setOptions(this,e),this._parsers=L.Util.extend({geojson:this._loadGeoJSON,gpx:this._convertToGeoJSON,kml:this._convertToGeoJSON},this.options.parsers),this.options.binaryFormats&&(this._binaryFormats=[].concat(this.options.binaryFormats))},load:function(t){var e=(t.size/1024).toFixed(4);if(e>this.options.fileSizeLimit)return void this.fire("data:error",{error:new Error("File size exceeds limit ("+e+" > "+this.options.fileSizeLimit+"kb)")});var i=t.name.split(".").pop(),o=this._parsers[i];if(!o)return void this.fire("data:error",{error:new Error("Unsupported file type "+t.type+"("+i+")")});var r=new FileReader;return r.onload=L.Util.bind(function(e){try{this.fire("data:loading",{filename:t.name,format:i});var r=o.call(this,e.target.result,i);this.fire("data:loaded",{layer:r,filename:t.name,format:i})}catch(n){this.fire("data:error",{error:n})}},this),-1!==this._binaryFormats.indexOf(i)?r.readAsArrayBuffer(t):r.readAsText(t),r},_loadGeoJSON:function(t){"string"==typeof t&&(t=JSON.parse(t));var e=L.geoJson(t,this.options.layerOptions);if(0===e.getLayers().length)throw new Error("GeoJSON has no valid layers.");return this.options.addToMap&&e.addTo(this._map),e},_convertToGeoJSON:function(t,e){"string"==typeof t&&(t=(new window.DOMParser).parseFromString(t,"text/xml"));var i=toGeoJSON[e](t);return this._loadGeoJSON(i)}});L.Control.FileLayerLoad=L.Control.extend({statics:{TITLE:"Load local file (GPX, KML, GeoJSON)",LABEL:"&#8965;"},options:{position:"topleft",fitBounds:!0,layerOptions:{},addToMap:!0,fileSizeLimit:1024},initialize:function(t){L.Util.setOptions(this,t),this.loader=null},onAdd:function(t){return this.loader=new FileLoader(t,this.options),this.loader.on("data:loaded",function(e){this.options.fitBounds&&window.setTimeout(function(){t.fitBounds(e.layer.getBounds())},500)},this),this._initDragAndDrop(t),this._initContainer()},_initDragAndDrop:function(t){var e=this.loader,i=t._container,o={dragenter:function(){t.scrollWheelZoom.disable()},dragleave:function(){t.scrollWheelZoom.enable()},dragover:function(t){t.stopPropagation(),t.preventDefault()},drop:function(i){i.stopPropagation(),i.preventDefault();{var o=Array.prototype.slice.apply(i.dataTransfer.files);o.length}setTimeout(function(){e.load(o.shift()),o.length>0&&setTimeout(arguments.callee,25)},25),t.scrollWheelZoom.enable()}};for(var r in o)i.addEventListener(r,o[r],!1)},_initContainer:function(){var t="leaflet-control-filelayer leaflet-control-zoom",e="leaflet-bar",i=e+"-part",o=L.DomUtil.create("div",t+" "+e),r=L.DomUtil.create("a",t+"-in "+i,o);r.innerHTML=L.Control.FileLayerLoad.LABEL,r.href="#",r.title=L.Control.FileLayerLoad.TITLE;var n=L.DomUtil.create("input","hidden",o);n.type="file",n.accept=this.options.formats?this.options.formats.join(","):".gpx,.kml,.geojson",n.style.display="none";var a=this.loader;return n.addEventListener("change",function(){a.load(this.files[0]),this.value=""},!1),L.DomEvent.disableClickPropagation(r),L.DomEvent.on(r,"click",function(t){n.click(),t.preventDefault()}),o}}),L.Control.fileLayerLoad=function(t){return new L.Control.FileLayerLoad(t)};
L.colors={OceanLakeLandSno:["rgb( 24,116,205)","rgb( 24,116,205)","rgb(135,206,255)","rgb(135,206,255)","rgb( 38,103, 40)","rgb( 38,103, 40)","rgb( 42,107, 40)","rgb( 42,107, 40)","rgb( 46,110, 41)","rgb( 46,110, 41)","rgb( 50,114, 41)","rgb( 50,114, 41)","rgb( 54,117, 41)","rgb( 54,117, 41)","rgb( 58,121, 42)","rgb( 58,121, 42)","rgb( 62,124, 42)","rgb( 62,124, 42)","rgb( 66,128, 42)","rgb( 66,128, 42)","rgb( 70,131, 43)","rgb( 70,131, 43)","rgb( 74,135, 43)","rgb( 74,135, 43)","rgb( 78,138, 43)","rgb( 78,138, 43)","rgb( 82,142, 44)","rgb( 82,142, 44)","rgb( 86,145, 44)","rgb( 86,145, 44)","rgb( 90,149, 44)","rgb( 90,149, 44)","rgb( 94,152, 45)","rgb( 94,152, 45)","rgb( 98,156, 45)","rgb( 98,156, 45)","rgb(102,159, 46)","rgb(102,159, 46)","rgb(106,163, 46)","rgb(106,163, 46)","rgb(110,166, 46)","rgb(110,166, 46)","rgb(114,170, 47)","rgb(114,170, 47)","rgb(118,173, 47)","rgb(118,173, 47)","rgb(122,177, 47)","rgb(122,177, 47)","rgb(126,180, 48)","rgb(126,180, 48)","rgb(130,184, 48)","rgb(130,184, 48)","rgb(134,187, 48)","rgb(134,187, 48)","rgb(138,191, 49)","rgb(138,191, 49)","rgb(142,194, 49)","rgb(142,194, 49)","rgb(146,198, 49)","rgb(146,198, 49)","rgb(154,205, 50)","rgb(154,205, 50)","rgb(155,206, 52)","rgb(155,206, 52)","rgb(156,207, 54)","rgb(156,207, 54)","rgb(158,208, 56)","rgb(158,208, 56)","rgb(159,210, 57)","rgb(159,210, 57)","rgb(160,211, 59)","rgb(160,211, 59)","rgb(161,212, 61)","rgb(161,212, 61)","rgb(162,213, 63)","rgb(162,213, 63)","rgb(163,214, 65)","rgb(163,214, 65)","rgb(165,215, 67)","rgb(165,215, 67)","rgb(166,216, 69)","rgb(166,216, 69)","rgb(167,218, 70)","rgb(167,218, 70)","rgb(168,219, 72)","rgb(168,219, 72)","rgb(169,220, 74)","rgb(169,220, 74)","rgb(170,221, 76)","rgb(170,221, 76)","rgb(172,222, 78)","rgb(172,222, 78)","rgb(173,223, 80)","rgb(173,223, 80)","rgb(174,224, 82)","rgb(174,224, 82)","rgb(175,225, 84)","rgb(175,225, 84)","rgb(176,227, 85)","rgb(176,227, 85)","rgb(177,228, 87)","rgb(177,228, 87)","rgb(179,229, 89)","rgb(179,229, 89)","rgb(180,230, 91)","rgb(180,230, 91)","rgb(181,231, 93)","rgb(181,231, 93)","rgb(182,232, 95)","rgb(182,232, 95)","rgb(183,233, 97)","rgb(183,233, 97)","rgb(184,235, 98)","rgb(184,235, 98)","rgb(186,236,100)","rgb(186,236,100)","rgb(188,238,104)","rgb(188,238,104)","rgb(190,238,107)","rgb(190,238,107)","rgb(192,238,111)","rgb(192,238,111)","rgb(194,239,114)","rgb(194,239,114)","rgb(197,239,117)","rgb(197,239,117)","rgb(199,239,121)","rgb(199,239,121)","rgb(201,239,124)","rgb(201,239,124)","rgb(203,240,127)","rgb(203,240,127)","rgb(205,240,130)","rgb(205,240,130)","rgb(207,240,134)","rgb(207,240,134)","rgb(209,240,137)","rgb(209,240,137)","rgb(212,241,140)","rgb(212,241,140)","rgb(214,241,144)","rgb(214,241,144)","rgb(216,241,147)","rgb(216,241,147)","rgb(218,241,150)","rgb(218,241,150)","rgb(220,242,154)","rgb(220,242,154)","rgb(222,242,157)","rgb(222,242,157)","rgb(224,242,160)","rgb(224,242,160)","rgb(226,242,164)","rgb(226,242,164)","rgb(229,243,167)","rgb(229,243,167)","rgb(231,243,170)","rgb(231,243,170)","rgb(233,243,174)","rgb(233,243,174)","rgb(235,243,177)","rgb(235,243,177)","rgb(237,244,180)","rgb(237,244,180)","rgb(239,244,183)","rgb(239,244,183)","rgb(241,244,187)","rgb(241,244,187)","rgb(244,244,190)","rgb(244,244,190)","rgb(246,245,193)","rgb(246,245,193)","rgb(250,245,200)","rgb(250,245,200)","rgb(250,244,199)","rgb(250,244,199)","rgb(249,244,197)","rgb(249,244,197)","rgb(249,243,196)","rgb(249,243,196)","rgb(249,243,194)","rgb(249,243,194)","rgb(248,242,193)","rgb(248,242,193)","rgb(248,242,191)","rgb(248,242,191)","rgb(248,241,190)","rgb(248,241,190)","rgb(247,241,188)","rgb(247,241,188)","rgb(247,240,187)","rgb(247,240,187)","rgb(247,239,186)","rgb(247,239,186)","rgb(246,239,184)","rgb(246,239,184)","rgb(246,238,183)","rgb(246,238,183)","rgb(246,238,181)","rgb(246,238,181)","rgb(245,237,180)","rgb(245,237,180)","rgb(245,237,178)","rgb(245,237,178)","rgb(244,236,177)","rgb(244,236,177)","rgb(244,236,175)","rgb(244,236,175)","rgb(244,235,174)","rgb(244,235,174)","rgb(243,235,172)","rgb(243,235,172)","rgb(243,234,171)","rgb(243,234,171)","rgb(243,233,170)","rgb(243,233,170)","rgb(242,233,168)","rgb(242,233,168)","rgb(242,232,167)","rgb(242,232,167)","rgb(242,232,165)","rgb(242,232,165)","rgb(241,231,164)","rgb(241,231,164)","rgb(241,231,162)","rgb(241,231,162)","rgb(241,230,161)","rgb(241,230,161)","rgb(240,229,158)","rgb(240,229,158)","rgb(239,228,155)","rgb(239,228,155)","rgb(238,226,153)","rgb(238,226,153)","rgb(237,225,150)","rgb(237,225,150)","rgb(236,224,148)","rgb(236,224,148)","rgb(235,222,145)","rgb(235,222,145)","rgb(234,221,142)","rgb(234,221,142)","rgb(233,220,140)","rgb(233,220,140)","rgb(233,219,137)","rgb(233,219,137)","rgb(232,217,135)","rgb(232,217,135)","rgb(231,216,132)","rgb(231,216,132)","rgb(230,215,130)","rgb(230,215,130)","rgb(229,213,127)","rgb(229,213,127)","rgb(228,212,124)","rgb(228,212,124)","rgb(227,211,122)","rgb(227,211,122)","rgb(226,209,119)","rgb(226,209,119)","rgb(225,208,117)","rgb(225,208,117)","rgb(224,207,114)","rgb(224,207,114)","rgb(223,205,111)","rgb(223,205,111)","rgb(222,204,109)","rgb(222,204,109)","rgb(221,203,106)","rgb(221,203,106)","rgb(220,201,104)","rgb(220,201,104)","rgb(220,200,101)","rgb(220,200,101)","rgb(219,199, 99)","rgb(219,199, 99)","rgb(218,198, 96)","rgb(218,198, 96)","rgb(217,196, 93)","rgb(217,196, 93)","rgb(216,195, 91)","rgb(216,195, 91)","rgb(213,191, 83)","rgb(213,191, 83)","rgb(213,190, 81)","rgb(213,190, 81)","rgb(212,189, 79)","rgb(212,189, 79)","rgb(212,187, 77)","rgb(212,187, 77)","rgb(212,186, 76)","rgb(212,186, 76)","rgb(212,185, 74)","rgb(212,185, 74)","rgb(211,184, 72)","rgb(211,184, 72)","rgb(211,182, 70)","rgb(211,182, 70)","rgb(211,181, 68)","rgb(211,181, 68)","rgb(211,180, 66)","rgb(211,180, 66)","rgb(210,179, 64)","rgb(210,179, 64)","rgb(210,177, 63)","rgb(210,177, 63)","rgb(210,176, 61)","rgb(210,176, 61)","rgb(209,175, 59)","rgb(209,175, 59)","rgb(209,174, 57)","rgb(209,174, 57)","rgb(209,172, 55)","rgb(209,172, 55)","rgb(209,171, 53)","rgb(209,171, 53)","rgb(208,170, 51)","rgb(208,170, 51)","rgb(208,169, 49)","rgb(208,169, 49)","rgb(208,167, 48)","rgb(208,167, 48)","rgb(207,166, 46)","rgb(207,166, 46)","rgb(207,165, 44)","rgb(207,165, 44)","rgb(207,164, 42)","rgb(207,164, 42)","rgb(207,162, 40)","rgb(207,162, 40)","rgb(206,161, 38)","rgb(206,161, 38)","rgb(206,160, 36)","rgb(206,160, 36)","rgb(206,159, 35)","rgb(206,159, 35)","rgb(206,157, 33)","rgb(206,157, 33)","rgb(205,155, 29)","rgb(205,155, 29)","rgb(203,153, 29)","rgb(203,153, 29)","rgb(200,151, 30)","rgb(200,151, 30)","rgb(198,148, 30)","rgb(198,148, 30)","rgb(196,146, 31)","rgb(196,146, 31)","rgb(194,144, 31)","rgb(194,144, 31)","rgb(191,142, 32)","rgb(191,142, 32)","rgb(189,139, 32)","rgb(189,139, 32)","rgb(187,137, 33)","rgb(187,137, 33)","rgb(185,135, 33)","rgb(185,135, 33)","rgb(182,133, 34)","rgb(182,133, 34)","rgb(180,130, 34)","rgb(180,130, 34)","rgb(178,128, 35)","rgb(178,128, 35)","rgb(175,126, 35)","rgb(175,126, 35)","rgb(173,124, 36)","rgb(173,124, 36)","rgb(171,121, 36)","rgb(171,121, 36)","rgb(169,119, 37)","rgb(169,119, 37)","rgb(166,117, 37)","rgb(166,117, 37)","rgb(164,115, 38)","rgb(164,115, 38)","rgb(162,112, 38)","rgb(162,112, 38)","rgb(159,110, 39)","rgb(159,110, 39)","rgb(157,108, 39)","rgb(157,108, 39)","rgb(155,106, 40)","rgb(155,106, 40)","rgb(153,103, 40)","rgb(153,103, 40)","rgb(150,101, 41)","rgb(150,101, 41)","rgb(148, 99, 41)","rgb(148, 99, 41)","rgb(146, 97, 42)","rgb(146, 97, 42)","rgb(144, 94, 42)","rgb(144, 94, 42)","rgb(139, 90, 43)","rgb(139, 90, 43)","rgb(137, 89, 42)","rgb(137, 89, 42)","rgb(135, 88, 42)","rgb(135, 88, 42)","rgb(133, 86, 41)","rgb(133, 86, 41)","rgb(131, 85, 41)","rgb(131, 85, 41)","rgb(129, 84, 40)","rgb(129, 84, 40)","rgb(127, 83, 39)","rgb(127, 83, 39)","rgb(125, 81, 39)","rgb(125, 81, 39)","rgb(124, 80, 38)","rgb(124, 80, 38)","rgb(122, 79, 38)","rgb(122, 79, 38)","rgb(120, 78, 37)","rgb(120, 78, 37)","rgb(118, 76, 37)","rgb(118, 76, 37)","rgb(116, 75, 36)","rgb(116, 75, 36)","rgb(114, 74, 35)","rgb(114, 74, 35)","rgb(112, 73, 35)","rgb(112, 73, 35)","rgb(110, 71, 34)","rgb(110, 71, 34)","rgb(108, 70, 34)","rgb(108, 70, 34)","rgb(106, 69, 33)","rgb(106, 69, 33)","rgb(104, 68, 32)","rgb(104, 68, 32)","rgb(102, 66, 32)","rgb(102, 66, 32)","rgb(100, 65, 31)","rgb(100, 65, 31)","rgb( 98, 64, 31)","rgb( 98, 64, 31)","rgb( 97, 63, 30)","rgb( 97, 63, 30)","rgb( 95, 61, 30)","rgb( 95, 61, 30)","rgb( 93, 60, 29)","rgb( 93, 60, 29)","rgb( 91, 59, 28)","rgb( 91, 59, 28)","rgb( 89, 58, 28)","rgb( 89, 58, 28)","rgb( 87, 56, 27)","rgb( 87, 56, 27)","rgb( 83, 54, 26)","rgb( 83, 54, 26)","rgb( 89, 61, 34)","rgb( 89, 61, 34)","rgb( 94, 67, 42)","rgb( 94, 67, 42)","rgb(100, 74, 50)","rgb(100, 74, 50)","rgb(106, 81, 58)","rgb(106, 81, 58)","rgb(111, 87, 65)","rgb(111, 87, 65)","rgb(117, 94, 73)","rgb(117, 94, 73)","rgb(123,101, 81)","rgb(123,101, 81)","rgb(129,108, 89)","rgb(129,108, 89)","rgb(134,114, 97)","rgb(134,114, 97)","rgb(140,121,105)","rgb(140,121,105)","rgb(146,128,113)","rgb(146,128,113)","rgb(151,134,121)","rgb(151,134,121)","rgb(157,141,129)","rgb(157,141,129)","rgb(163,148,137)","rgb(163,148,137)","rgb(168,154,144)","rgb(168,154,144)","rgb(174,161,152)","rgb(174,161,152)","rgb(180,168,160)","rgb(180,168,160)","rgb(185,174,168)","rgb(185,174,168)","rgb(191,181,176)","rgb(191,181,176)","rgb(197,188,184)","rgb(197,188,184)","rgb(202,194,192)","rgb(202,194,192)","rgb(208,201,200)","rgb(208,201,200)","rgb(214,208,208)","rgb(214,208,208)","rgb(220,215,216)","rgb(220,215,216)","rgb(225,221,223)","rgb(225,221,223)","rgb(231,228,231)","rgb(231,228,231)","rgb(237,235,239)","rgb(237,235,239)","rgb(248,248,255)","rgb(248,248,255)"],"black - white":["black","white"],RdYlBu:"RdYlBu",PuBuGn:"PuBuGn"};
L.CanvasLayer=(L.Layer?L.Layer:L.Class).extend({redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this._redraw(),this},_redraw:function(){throw"implement in subclass"},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","leaflet-bil-layer leaflet-layer"),a=this._map.getSize();t.width=a.x,t.height=a.y,L.DomUtil.setOpacity(t,this.options.opacity);var i=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(i?"animated":"hide"))},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var a=this._map.getSize();this._canvas.width!==a.x&&(this._canvas.width=a.x),this._canvas.height!==a.y&&(this._canvas.height=a.y),this._redraw()},_animateZoom:function(t){var a=this._map.getZoomScale(t.zoom),i=this._map._getCenterOffset(t.center)._multiplyBy(-a).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,i,a):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(i)+" scale("+a+")"}});
L.DemLayer=L.CanvasLayer.extend({options:{opacity:.8,textColor:"rgb(218, 72, 0)",colorScale:L.colors["OceanLakeLandSno"],autoScale:!1,scaleMin:0,scaleMax:1e3},initialize:function(t){L.setOptions(this,t)},getBounds:function(){throw"implement in subclass"},_redraw:function(){if(this._data&&this._header){var t,a,e,i,n,l,o,s,r,h,g,c,d=this._map,u=this._header,_=d.getSize(),x=d.getBounds(),m=L.latLng(u.ulymap,u.ulxmap),y=u.xdim,p=u.ydim,f=y/2,w=p/2;this._ctx=n=this._canvas.getContext("2d"),n.clearRect(0,0,_.x,_.y),t=this.getBounds(),x.intersects(t)&&(this._imageData=d.getZoom()<16?n.createImageData(this._canvas.width,this._canvas.height):null,a=this._snapToRaster(x,m,y,p),e=this._restrictToBounds(a,t),l=e.getNorthWest(),i=e.getSouthEast(),o=this.getCellRange(e),this.options.autoScale?(s=this.getStats(o),c=[s.min,s.max]):c=[this.options.scaleMin,this.options.scaleMax],g=chroma.scale(this.options.colorScale).mode("lab").domain(c),r=this.calcPixelAxisRow(l,i,y,p,f,w),h=this.calcPixelAxisColumn(l,i,y,p,f,w),this.drawGrid(o,r,h,g),this._imageData&&n.putImageData(this._imageData,0,0),this._frame=null)}},_snapToRaster:function(t,a,e,i){var n=t.getSouthWest(),l=t.getNorthEast();return L.latLngBounds(L.latLng(this._snap(n.lat,a.lat,i)-i,this._snap(n.lng,a.lng,e)),L.latLng(this._snap(l.lat,a.lat,i),this._snap(l.lng,a.lng,e)+e))},_snap:function(t,a,e){return t-(t-a)%e},_restrictToBounds:function(t,a){var e=t.getSouthWest(),i=t.getNorthEast(),n=a.getSouthWest(),l=a.getNorthEast();return L.latLngBounds(L.latLng(Math.max(e.lat,n.lat),Math.max(e.lng,n.lng)),L.latLng(Math.min(i.lat,l.lat),Math.min(i.lng,l.lng)))},calcPixelAxisColumn:function(t,a,e,i,n,l){var o,s,r,h,g=[],c=this._map,d=L.latLng(t.lat,t.lng),u=L.latLng(t.lat+l,t.lng),_=L.latLng(t.lat+l-i,t.lng);for(o=t.lng,s=a.lng;s>o;o+=e)d.lng=o,u.lng=o-n,_.lng=o-n+e,r=c.latLngToContainerPoint(u),h=c.latLngToContainerPoint(_),g.push({x:c.latLngToContainerPoint(d).x,ulx:r.x,width:h.x-r.x});return g},calcPixelAxisRow:function(t,a,e,i,n,l){var o,s,r,h,g=[],c=this._map,d=L.latLng(t.lat,t.lng),u=L.latLng(t.lat,t.lng-n),_=L.latLng(t.lat,t.lng-n+e);for(o=t.lat,s=a.lat+i;o>=s;o-=i)d.lat=o,u.lat=o+l,_.lat=o+l-i,r=c.latLngToContainerPoint(u),h=c.latLngToContainerPoint(_),g.push({y:c.latLngToContainerPoint(d).y,uly:r.y,height:h.y-r.y});return g},drawGrid:function(t,a,e,i){var n,l,o,s,r,h,g,c,d=t.max.y,u=t.max.x,L=this._header.nodata,_=this._map.getZoom();for(c=this._imageData?this._drawCellPixels:this._drawCellRect,n=t.min.y,l=0;d>=n;n++,l++)for(o=t.min.x,s=0;u>=o;o++,s++)h=e[s],g=a[l],0!==h.width&&0!==g.height&&(r=this.getValueAtXY(o,n),c(r,h.ulx,g.uly,h.width,g.height,i,L,this),h.width>15&&(_>17&&this._drawCrosshair(h.x,g.y),this._drawText(_,h.x,g.y,r,L)))},_drawCellRect:function(t,a,e,i,n,l,o,s){var r=s._ctx;r.fillStyle=t!==o?l(t).css():"red",r.fillRect(a,e,i,n)},_drawCellPixels:function(t,a,e,i,n,l,o,s){var r;r=t!==o?l(t).rgba():[255,0,0],r[3]=255,s._fillRect(a,e,i,n,r,s)},_fillRect:function(t,a,e,i,n,l){var o,s,r,h,g,c=l._imageData.data,d=l._imageData.width;for(o=t,h=o+e;h>o;o++)for(s=a,g=s+i;g>s;s++)r=4*(s*d+o),c[r]=n[0],c[r+1]=n[1],c[r+2]=n[2],c[r+3]=n[3]},_drawCrosshair:function(t,a){var e=this._ctx,i=t+.5,n=a+.5,l=3;e.strokeStyle=this.options.textColor,e.beginPath(),e.moveTo(i-l,n),e.lineTo(i+l,n),e.stroke(),e.beginPath(),e.moveTo(i,n-l),e.lineTo(i,n+l),e.stroke()},_drawText:function(t,a,e,i,n){var l=this._ctx,o=i===n,s=o?t>17?"no data":"n/d":i;l.fillStyle=o?"black":this.options.textColor,l.font=(t>18?"Bold 10pt":"8pt")+" Arial",l.textAlign="center",l.textBaseline=t>17?"top":"middle",l.fillText(s,a,e+(t>17?6:0))},_debugBounds:function(t,a,e,i){this._debugLayers&&this._map.removeLayer(this._debugLayers),this._debugLayers=L.featureGroup().addTo(this._map),this._debugLayers.addLayer(L.rectangle(t,{color:"green"})),this._debugLayers.addLayer(L.rectangle(a)),this._debugLayers.addLayer(L.rectangle(e,{color:"yellow",weight:2})),this._debugLayers.addLayer(L.marker(i)),console.log("dataBounds = "+t.toBBoxString())}});
L.BilDem=L.DemLayer.extend({initialize:function(t,e){this._url=t,L.setOptions(this,e)},onAdd:function(t){L.DemLayer.prototype.onAdd.call(this,t),!this._url||this._data&&this._header||this.load()},load:function(){var t=this._url,e=L.bind(function(t){if(t)throw t;this._data&&this._header&&this._loaded()},this);-1!==t.search(/.zip$/)?this.loadZip(t,e):(this.loadBIL(t,e),this.loadHeader(t.replace(".bil",".hdr"),e))},_loaded:function(){console.log("loaded"),this._redraw()},_get:function(t,e,n){var a=new XMLHttpRequest;a.open("GET",t,!0),e&&(a.responseType="arraybuffer"),a.onload=function(){console.timeEnd(t),(200===a.status||0===a.status)&&n(null,e?a.response:a.responseText)},a.onerror=function(){n(new Error("Error loading "+t+"("+a.status+")"))},console.time(t),a.send()},addBIL:function(t){this._data=t,this._dataView=new Int16Array(this._data),console.log("bil loaded: byteLength = "+this._data.byteLength)},loadBIL:function(t,e){this._get(t,!0,L.bind(function(t,n){this.addBIL(n),e()},this))},addHeader:function(t){this._header=this.parseHeader(t),console.log("hdr loaded: ",this._header)},loadHeader:function(t,e){this._get(t,!1,L.bind(function(t,n){this.addHeader(n),e()},this))},addZip:function(t){function e(t){return a=n.filter(function(e){return-1!==e.search("."+t+"$")}),1===a.length?a[0]:null}var n,a,i,r;return n=new JSZip(t),(i=e("bil"))?(this.addBIL(i.asArrayBuffer()),(r=e("hdr"))?(this.addHeader(r.asText()),void this._loaded()):console.error("hdr file not found in "+url)):console.error("bil file not found in "+url)},loadZip:function(t){this._get(t,!0,L.bind(function(t,e){return t?console.error(t):void this.addZip(e)},this))},parseHeader:function(t){var e,n,a,i,r,o={},s=/\s+/,d=["nrows","ncols","nbands","nbits","pixeltype","byteorder","layout","skipbytes","ulxmap","ulymap","xdim","ydim","bandrowbytes","totalrowbytes","bandgapbytes","nodata"],l=["nrows","ncols","nbands","nbits","skipbytes","bandrowbytes","totalrowbytes","bandgapbytes","nodata"],h=["ulxmap","ulymap","xdim","ydim"],u=t.split("\n");for(e=0,n=u.length;n>e;e++)a=u[e].split(s),i=a[0].toLowerCase(),r=a[1],-1!==d.indexOf(i)&&(o[i]=-1!==l.indexOf(i)?parseInt(r):-1!==h.indexOf(i)?parseFloat(r):r);return o},getBounds:function(){var t=this._header;return L.latLngBounds(L.latLng(t.ulymap-t.nrows*t.ydim,t.ulxmap),L.latLng(t.ulymap,t.ulxmap+t.ncols*t.xdim))},getCellRange:function(t){return L.bounds(this.getCellXY(t.getNorthWest()),this.getCellXY(t.getSouthEast()).subtract([1,1]))},getCellXY:function(t){var e=(this._header.nrows,this._header.ulymap),n=this._header.ulxmap,a=t.lat,i=t.lng,r=this._header.ydim,o=this._header.xdim;return L.point(Math.round((i-n)/o),Math.round((e-a)/r))},getValueAtLatLng:function(t){var e=this.getCellXY(t);return this.getValueAtXY(e.x,e.y)},getValueAtXY:function(t,e){var n,a,i=this._header.ncols;return n=e*i+t,a=this._dataView[n]},getStats:function(t){var e,n,a,i,r=t.max.y,o=t.max.x,s=this._dataView,d=this._header.ncols,l=this._header.nodata;for(e={min:Number.MAX_VALUE,max:Number.MIN_VALUE},n=t.min.y;r>=n;n++)for(a=t.min.x;o>=a;a++)i=s[n*d+a],i!==l&&(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i));return e}});
L.OptionsControl=L.Class.extend({options:null,layers:[],initialize:function(i){i&&this.addLayer(i)},initGui:function(){var i,o,s,n,t,a,e=new dat.GUI;s=e.add(this.options,"opacity",0,1),s.onChange(L.bind(function(i){for(o=0;o<this.layers.length;o++)L.DomUtil.setOpacity(this.layers[o]._canvas,i)},this)),i=L.bind(function(){for(o=0;o<this.layers.length;o++)this.layers[o]._redraw()},this),n=Object.keys(L.colors),t={colorScale:null};for(a in L.colors)L.colors[a]===this.options.colorScale&&(t.colorScale=a);e.add(t,"colorScale",n).onFinishChange(L.bind(function(o){this.options.colorScale=L.colors[o],i()},this)),e.add(this.options,"scaleMin").onFinishChange(i),e.add(this.options,"scaleMax").onFinishChange(i),e.add(this.options,"autoScale").onFinishChange(i)},addLayer:function(i){i instanceof L.DemLayer&&(this.layers.push(i),this._setOptions(i))},removeLayer:function(i){var o=this.layers.indexOf(i);-1!==o&&this.layers.splice(o,1)},_setOptions:function(i){this.options?i.options=this.options:(this.options=i.options,this.initGui())}});
//# sourceMappingURL=leaflet-raw-dem.min.js.map